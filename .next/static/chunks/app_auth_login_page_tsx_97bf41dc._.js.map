{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/lokalista/app/auth/login/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { createClient } from \"@/lib/supabase/browserClient\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function LoginPage() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [errors, setErrors] = useState<{ [k: string]: string }>({});\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [message, setMessage] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const router = useRouter();\r\n\r\n  // Check if user is already logged in\r\n  useEffect(() => {\r\n    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\n    const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n    \r\n    if (!supabaseUrl || !supabaseAnonKey || supabaseUrl === \"https://placeholder.supabase.co\") {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    \r\n    const supabase = createClient();\r\n    \r\n    const checkSession = async () => {\r\n      try {\r\n        const { data, error } = await supabase.auth.getSession();\r\n        \r\n        if (error) {\r\n          console.error('Error getting session:', error);\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        \r\n        if (data?.session) {\r\n          router.push(\"/dashboard\");\r\n        } else {\r\n          setLoading(false);\r\n        }\r\n      } catch (err) {\r\n        console.error('Error in checkSession:', err);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    checkSession();\r\n\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange((_event: any, session: any) => {\r\n      if (session) {\r\n        router.push(\"/dashboard\");\r\n      } else {\r\n        setLoading(false);\r\n      }\r\n    });\r\n\r\n    return () => subscription.unsubscribe();\r\n  }, [router]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\" style={{ backgroundColor: \"#eadbfd\" }}>\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-[#8c52ff] mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600\">Loading...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function isEmail(v: string) {\r\n    return /.+@.+\\..+/.test(v);\r\n  }\r\n\r\n  async function onSubmit() {\r\n    const e: { [k: string]: string } = {};\r\n    if (!isEmail(email)) e.email = \"Enter a valid email.\";\r\n    if (password.length < 6) e.password = \"Password must be 6+ characters.\";\r\n    setErrors(e);\r\n    if (Object.keys(e).length !== 0) return;\r\n\r\n    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\n    const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n    \r\n    if (!supabaseUrl || !supabaseAnonKey || supabaseUrl === \"https://placeholder.supabase.co\") {\r\n      setMessage(\"Authentication is currently unavailable. The database service is temporarily offline. Please try again later or contact support.\");\r\n      return;\r\n    }\r\n\r\n    setSubmitting(true);\r\n    setMessage(null);\r\n    try {\r\n      const supabase = createClient();\r\n      const { error } = await supabase.auth.signInWithPassword({ email, password });\r\n      if (error) {\r\n        setMessage(error.message);\r\n        return;\r\n      }\r\n      router.push(\"/dashboard\");\r\n    } catch (err) {\r\n      setMessage(err instanceof Error ? err.message : \"An error occurred\");\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen\" style={{ backgroundColor: \"#eadbfd\" }}>\r\n      <div className=\"container py-12\">\r\n        <div className=\"min-h-[70dvh] flex items-center justify-center\">\r\n          <div className=\"w-full max-w-md\">\r\n            <div className=\"p-6 md:p-7 rounded-xl border border-border/60 bg-background shadow-sm\">\r\n              <div className=\"text-center mb-6\">\r\n                <div className=\"inline-flex items-center gap-2 mb-4\">\r\n                  <span className=\"h-8 w-8 rounded-xl bg-gradient-to-r from-fuchsia-500 to-violet-600 grid place-items-center text-white\">\r\n                    <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden>\r\n                      <path d=\"M12 21s7-4.5 7-10a7 7 0 10-14 0c0 5.5 7 10 7 10z\" stroke=\"currentColor\" strokeWidth=\"1.6\"/>\r\n                      <circle cx=\"12\" cy=\"11\" r=\"2\" fill=\"currentColor\" />\r\n                    </svg>\r\n                  </span>\r\n                  <span className=\"text-lg font-semibold bg-gradient-to-r from-fuchsia-500 to-violet-600 bg-clip-text text-transparent\">Lokalista</span>\r\n                </div>\r\n                <h1 className=\"h1 mb-2\">Welcome back</h1>\r\n                <p className=\"text-muted\">Access your saved favorites and personalized recommendations.</p>\r\n              </div>\r\n              <div className=\"flex flex-col gap-3\">\r\n                <label className=\"text-sm font-medium\" htmlFor=\"email\">Email</label>\r\n                <input id=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} placeholder=\"you@example.com\" className=\"h-11 px-3 rounded-md border border-border/60 focus-ring\" />\r\n                {errors.email && <div className=\"text-sm text-red-600\">{errors.email}</div>}\r\n\r\n                <label className=\"text-sm font-medium\" htmlFor=\"password\">Password</label>\r\n                <input id=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} placeholder=\"••••••••\" type=\"password\" className=\"h-11 px-3 rounded-md border border-border/60 focus-ring\" />\r\n                {errors.password && <div className=\"text-sm text-red-600\">{errors.password}</div>}\r\n\r\n                <button onClick={onSubmit} disabled={submitting} className=\"mt-2 h-11 rounded-md bg-[#8c52ff] text-white hover:opacity-90 disabled:opacity-60\">\r\n                  {submitting ? \"Signing in…\" : \"Continue\"}\r\n                </button>\r\n              </div>\r\n              {message && <div className=\"mt-3 text-sm text-center\">{message}</div>}\r\n              <div className=\"mt-5 text-sm text-center\">\r\n                New here? <a href=\"/auth/signup\" className=\"underline underline-offset-4 text-[#8c52ff]\">Sign up</a>\r\n              </div>\r\n            </div>\r\n            <div className=\"mt-6 text-sm text-center\">\r\n              <a href=\"/\" className=\"underline underline-offset-4\">Back to home</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}