{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Craig/Desktop/WEB%20DEV/final%20project/deployment/lokalista/app/community/page.tsx"],"sourcesContent":["\"use client\";\n\n// Clone of journey page but with /community redirects\nimport { useEffect, useMemo, useState } from \"react\";\nimport { createClient } from \"@/lib/supabase/browserClient\";\nimport Modal from \"@/app/ui/Modal\";\n\ntype Profile = {\n  id: string;\n  first_name?: string | null;\n  last_name?: string | null;\n};\n\ntype Post = {\n  id: string;\n  user_id: string;\n  content: string;\n  created_at: string;\n  profiles?: Profile | null;\n  likes_count?: number;\n  comments_count?: number;\n  liked_by_me?: boolean;\n  image_url?: string | null;\n};\n\ntype Comment = {\n  id: string;\n  post_id: string;\n  user_id: string;\n  content: string;\n  created_at: string;\n  profiles?: Profile | null;\n};\n\nexport default function CommunityPage() {\n  const supabase = useMemo(() => createClient(), []);\n  const [userId, setUserId] = useState<string | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [content, setContent] = useState(\"\");\n  const [submitting, setSubmitting] = useState(false);\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [expandedPostIds, setExpandedPostIds] = useState<Set<string>>(new Set());\n  const [commentsByPost, setCommentsByPost] = useState<Record<string, Comment[]>>({});\n  const [newCommentContent, setNewCommentContent] = useState<Record<string, string>>({});\n  const [imageFile, setImageFile] = useState<File | null>(null);\n  const [imagePreview, setImagePreview] = useState<string | null>(null);\n  const [selectedPost, setSelectedPost] = useState<Post | null>(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      const { data } = await supabase.auth.getUser();\n      if (!mounted) return;\n      const uid = data.user?.id ?? null;\n      setUserId(uid);\n      await loadPosts(uid);\n      setLoading(false);\n    })();\n    const { data: sub } = supabase.auth.onAuthStateChange(async (_e, session) => {\n      const uid = session?.user?.id ?? null;\n      setUserId(uid);\n      await loadPosts(uid);\n    });\n    return () => {\n      mounted = false;\n      sub.subscription.unsubscribe();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  async function loadPosts(currentUserId: string | null = userId) {\n    const { data, error } = await supabase\n      .from(\"posts\")\n      .select(\n        `id, user_id, content, image_url, created_at, profiles:profiles!posts_user_id_fkey(id, first_name, last_name),\n         likes_count:likes(count), comments_count:comments(count)`\n      )\n      .order(\"created_at\", { ascending: false });\n\n    if (error) {\n      console.error(error);\n      return;\n    }\n\n    const normalized = (data as any[]).map((row) => ({\n      ...row,\n      likes_count: Array.isArray(row.likes_count) ? row.likes_count[0]?.count ?? 0 : row.likes_count ?? 0,\n      comments_count: Array.isArray(row.comments_count) ? row.comments_count[0]?.count ?? 0 : row.comments_count ?? 0,\n      liked_by_me: false,\n    })) as Post[];\n\n    if (currentUserId && normalized.length) {\n      const postIds = normalized.map((p) => p.id);\n      const { data: myLikes, error: likesErr } = await supabase\n        .from(\"likes\")\n        .select(\"post_id\")\n        .eq(\"user_id\", currentUserId)\n        .in(\"post_id\", postIds);\n      if (!likesErr && myLikes) {\n        const likedSet = new Set(myLikes.map((l: any) => l.post_id));\n        for (const p of normalized) p.liked_by_me = likedSet.has(p.id);\n      }\n    }\n\n    setPosts(normalized);\n  }\n\n  async function submitPost(e: React.FormEvent) {\n    e.preventDefault();\n    if (!userId) {\n      window.location.href = \"/auth/login?next=/community\";\n      return;\n    }\n    if (!content.trim()) return;\n    setSubmitting(true);\n    let imageUrl: string | null = null;\n    try {\n      if (imageFile) {\n        const ext = imageFile.name.split(\".\").pop()?.toLowerCase() || \"jpg\";\n        const path = `${userId}/${Date.now()}-${Math.random().toString(36).slice(2)}.${ext}`;\n        const { error: upErr } = await supabase.storage.from(\"post-images\").upload(path, imageFile, {\n          cacheControl: \"3600\",\n          upsert: false,\n          contentType: imageFile.type || \"image/jpeg\",\n        });\n        if (upErr) throw upErr;\n        const { data: pub } = supabase.storage.from(\"post-images\").getPublicUrl(path);\n        imageUrl = pub.publicUrl;\n      }\n      const { error } = await supabase.from(\"posts\").insert({ content, image_url: imageUrl, user_id: userId });\n      if (error) throw error;\n      setContent(\"\");\n      setImageFile(null);\n      setImagePreview(null);\n      await loadPosts();\n    } catch (err: any) {\n      alert(err?.message || \"Failed to post.\");\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  async function toggleLike(post: Post) {\n    if (!userId) {\n      window.location.href = \"/auth/login?next=/community\";\n      return;\n    }\n    if (post.liked_by_me) {\n      const { error } = await supabase.from(\"likes\").delete().match({ post_id: post.id, user_id: userId });\n      if (error) return alert(error.message);\n    } else {\n      // Upsert to avoid duplicate key conflicts on refresh/race conditions\n      const { error } = await supabase\n        .from(\"likes\")\n        .upsert({ post_id: post.id, user_id: userId }, { onConflict: \"post_id,user_id\" });\n      if (error) return alert(error.message);\n    }\n    await loadPosts(userId);\n  }\n\n  async function loadComments(postId: string) {\n    const { data, error } = await supabase\n      .from(\"comments\")\n      .select(\"id, post_id, user_id, content, created_at, profiles:profiles!comments_user_id_fkey(id, first_name, last_name)\")\n      .eq(\"post_id\", postId)\n      .order(\"created_at\", { ascending: true });\n    if (error) return alert(error.message);\n    setCommentsByPost((prev) => ({ ...prev, [postId]: (data as Comment[]) || [] }));\n  }\n\n  async function submitComment(postId: string) {\n    if (!userId) {\n      window.location.href = \"/auth/login?next=/community\";\n      return;\n    }\n    const text = (newCommentContent[postId] || \"\").trim();\n    if (!text) return;\n    const { error } = await supabase.from(\"comments\").insert({ post_id: postId, content: text, user_id: userId });\n    if (error) return alert(error.message);\n    setNewCommentContent((p) => ({ ...p, [postId]: \"\" }));\n    await loadComments(postId);\n    await loadPosts();\n  }\n\n  function toggleExpanded(postId: string) {\n    setExpandedPostIds((prev) => {\n      const next = new Set(prev);\n      if (next.has(postId)) next.delete(postId);\n      else next.add(postId);\n      return next;\n    });\n    if (!commentsByPost[postId]) void loadComments(postId);\n  }\n\n  function openPostModal(post: Post) {\n    setSelectedPost(post);\n    setIsModalOpen(true);\n    if (!commentsByPost[post.id]) {\n      void loadComments(post.id);\n    }\n  }\n\n  function closeModal() {\n    setIsModalOpen(false);\n    setSelectedPost(null);\n  }\n\n  // Filter posts to only show those with images\n  const postsWithImages = useMemo(() => {\n    return posts.filter(post => post.image_url);\n  }, [posts]);\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <div className=\"container max-w-2xl py-6\">\n        <h1 className=\"text-2xl font-semibold mb-4\">Community</h1>\n\n        {/* Composer */}\n        <form onSubmit={submitPost} className=\"bg-white border border-gray-200 rounded-xl p-4 mb-6\">\n          <textarea\n            value={content}\n            onChange={(e) => setContent(e.target.value)}\n            placeholder={userId ? \"Share something with the community...\" : \"Sign in to post\"}\n            className=\"w-full resize-none outline-none min-h-[90px]\"\n            disabled={!userId || submitting}\n          />\n          {imagePreview && (\n            <div className=\"mt-3\">\n              <img src={imagePreview} alt=\"Selected\" className=\"max-h-64 rounded-lg border\" />\n            </div>\n          )}\n          <div className=\"flex items-center justify-between mt-3\">\n            <span className=\"text-sm text-gray-500\">{content.length}/280</span>\n            <button\n              type=\"submit\"\n              disabled={!userId || submitting || !content.trim() || content.length > 280}\n              className=\"px-4 h-9 rounded-full bg-[#8c52ff] text-white disabled:opacity-50\"\n            >\n              {submitting ? \"Posting...\" : \"Post\"}\n            </button>\n          </div>\n          <div className=\"mt-3\">\n            <label className=\"inline-flex items-center gap-2 text-sm text-gray-700 cursor-pointer\">\n              <input\n                type=\"file\"\n                accept=\"image/*\"\n                className=\"hidden\"\n                disabled={!userId || submitting}\n                onChange={(e) => {\n                  const file = e.target.files?.[0] || null;\n                  setImageFile(file);\n                  setImagePreview(file ? URL.createObjectURL(file) : null);\n                }}\n              />\n              <span className=\"px-3 h-9 inline-flex items-center rounded-md border border-gray-300 hover:bg-gray-50\">Add image</span>\n              {imageFile && <span className=\"text-gray-500\">{imageFile.name}</span>}\n            </label>\n          </div>\n        </form>\n\n        {/* Feed */}\n        {loading ? (\n          <div className=\"text-center text-gray-500\">Loading…</div>\n        ) : posts.length === 0 ? (\n          <div className=\"text-center text-gray-500\">No posts yet. Be the first!</div>\n        ) : (\n          <ul className=\"space-y-3\">\n            {posts.map((post) => (\n              <li key={post.id} className=\"bg-white border border-gray-200 rounded-xl p-4\">\n                <div className=\"flex items-start gap-3\">\n                  <div className=\"w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center text-sm font-medium\">\n                    {(((post.profiles?.first_name || \"\") + (post.profiles?.last_name ? ` ${post.profiles.last_name}` : \"\")) || post.user_id || \"?\").slice(0, 1).toUpperCase()}\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                      <span className=\"font-medium text-gray-900\">{(post.profiles?.first_name || \"\").toString() + (post.profiles?.last_name ? ` ${post.profiles.last_name}` : \"\") || \"Anonymous\"}</span>\n                      <span>·</span>\n                      <time dateTime={post.created_at}>{new Date(post.created_at).toLocaleString()}</time>\n                    </div>\n                    <p className=\"mt-2 whitespace-pre-wrap break-words\">{post.content}</p>\n                    {post.image_url && (\n                      <div className=\"mt-3\">\n                        <img src={post.image_url} alt=\"Post image\" className=\"rounded-lg border max-h-96\" />\n                      </div>\n                    )}\n                    <div className=\"mt-3 flex items-center gap-4 text-sm text-gray-600\">\n                      <button onClick={() => toggleLike(post)} className={`inline-flex items-center gap-1 ${post.liked_by_me ? \"text-fuchsia-600\" : \"hover:text-gray-900\"}`}>\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden>\n                          <path d=\"M12 21s-7-4.5-7-10a7 7 0 0114 0c0 5.5-7 10-7 10z\" stroke=\"currentColor\" strokeWidth=\"1.6\"/>\n                        </svg>\n                        <span>{post.likes_count ?? 0}</span>\n                      </button>\n                      <button onClick={() => toggleExpanded(post.id)} className=\"inline-flex items-center gap-1 hover:text-gray-900\">\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden>\n                          <path d=\"M21 15a2 2 0 01-2 2H8l-4 4V5a2 2 0 012-2h13a2 2 0 012 2v10z\" stroke=\"currentColor\" strokeWidth=\"1.6\"/>\n                        </svg>\n                        <span>{post.comments_count ?? 0}</span>\n                      </button>\n                    </div>\n\n                    {expandedPostIds.has(post.id) && (\n                      <div className=\"mt-3 border-t border-gray-200 pt-3\">\n                        <div className=\"space-y-3\">\n                          {(commentsByPost[post.id] || []).map((c) => (\n                            <div key={c.id} className=\"flex items-start gap-3\">\n                              <div className=\"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-xs font-medium\">\n                                {(((c.profiles?.first_name || \"\") + (c.profiles?.last_name ? ` ${c.profiles.last_name}` : \"\")) || c.user_id || \"?\").slice(0, 1).toUpperCase()}\n                              </div>\n                              <div className=\"flex-1\">\n                                <div className=\"flex items-center gap-2 text-xs text-gray-600\">\n                                  <span className=\"font-medium text-gray-900\">{(c.profiles?.first_name || \"\") + (c.profiles?.last_name ? ` ${c.profiles.last_name}` : \"\") || \"Anonymous\"}</span>\n                                  <span>·</span>\n                                  <time dateTime={c.created_at}>{new Date(c.created_at).toLocaleString()}</time>\n                                </div>\n                                <p className=\"mt-1 whitespace-pre-wrap break-words text-sm\">{c.content}</p>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n\n                        <div className=\"mt-3 flex items-center gap-2\">\n                          <input\n                            type=\"text\"\n                            placeholder={userId ? \"Write a comment…\" : \"Sign in to comment\"}\n                            value={newCommentContent[post.id] || \"\"}\n                            onChange={(e) => setNewCommentContent((p) => ({ ...p, [post.id]: e.target.value }))}\n                            className=\"flex-1 h-9 px-3 rounded-md border border-gray-300\"\n                            disabled={!userId}\n                          />\n                          <button onClick={() => submitComment(post.id)} disabled={!userId || !(newCommentContent[post.id] || \"\").trim()} className=\"px-3 h-9 rounded-md bg-gray-900 text-white disabled:opacity-50\">Post</button>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":"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","debugId":null}}]
}