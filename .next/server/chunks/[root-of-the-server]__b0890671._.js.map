{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Craig/Desktop/WEB%20DEV/final%20project/deployment/lokalista/app/api/chat/route.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { NextResponse } from \"next/server\";\r\nimport Groq from \"groq-sdk\";\r\n\r\nconst client = new Groq({\r\n  apiKey: process.env.GROQ_API_KEY,\r\n});\r\n\r\ntype ChatMessage = {\r\n  role: \"system\" | \"user\" | \"assistant\";\r\n  content: string;\r\n};\r\n\r\nexport async function POST(request: Request) {\r\n  try {\r\n    const { messages } = await request.json();\r\n\r\n    if (!Array.isArray(messages) || messages.length === 0) {\r\n      return NextResponse.json({ error: \"Messages array is required.\" }, { status: 400 });\r\n    }\r\n\r\n    if (!process.env.GROQ_API_KEY) {\r\n      return NextResponse.json({ error: \"Groq API key is not configured.\" }, { status: 500 });\r\n    }\r\n\r\n    const sanitizedMessages: ChatMessage[] = messages\r\n      .filter((msg: ChatMessage) => msg && typeof msg.content === \"string\" && msg.content.trim().length > 0)\r\n      .map((msg: ChatMessage) => ({\r\n        role: msg.role,\r\n        content: msg.content.trim(),\r\n      }));\r\n\r\n    if (sanitizedMessages.length === 0) {\r\n      return NextResponse.json({ error: \"No valid messages supplied.\" }, { status: 400 });\r\n    }\r\n\r\n    const model = process.env.GROQ_CHAT_MODEL || \"llama-3.1-8b-instant\";\r\n\r\n    const completion = await client.chat.completions.create({\r\n      model,\r\n      messages: sanitizedMessages,\r\n      temperature: 0.7,\r\n      max_tokens: 800,\r\n      top_p: 0.9,\r\n    });\r\n\r\n    return NextResponse.json(completion);\r\n  } catch (error: any) {\r\n    console.error(\"Groq chat route error:\", error);\r\n    const message =\r\n      error?.response?.data?.error?.message ||\r\n      error?.message ||\r\n      \"Unexpected error while generating chat response.\";\r\n    return NextResponse.json({ error: message }, { status: 500 });\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;;;AAEA,MAAM,SAAS,IAAI,kKAAI,CAAC;IACtB,QAAQ,QAAQ,GAAG,CAAC,YAAY;AAClC;AAOO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEvC,IAAI,CAAC,MAAM,OAAO,CAAC,aAAa,SAAS,MAAM,KAAK,GAAG;YACrD,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA8B,GAAG;gBAAE,QAAQ;YAAI;QACnF;QAEA,IAAI,CAAC,QAAQ,GAAG,CAAC,YAAY,EAAE;YAC7B,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAkC,GAAG;gBAAE,QAAQ;YAAI;QACvF;QAEA,MAAM,oBAAmC,SACtC,MAAM,CAAC,CAAC,MAAqB,OAAO,OAAO,IAAI,OAAO,KAAK,YAAY,IAAI,OAAO,CAAC,IAAI,GAAG,MAAM,GAAG,GACnG,GAAG,CAAC,CAAC,MAAqB,CAAC;gBAC1B,MAAM,IAAI,IAAI;gBACd,SAAS,IAAI,OAAO,CAAC,IAAI;YAC3B,CAAC;QAEH,IAAI,kBAAkB,MAAM,KAAK,GAAG;YAClC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA8B,GAAG;gBAAE,QAAQ;YAAI;QACnF;QAEA,MAAM,QAAQ,QAAQ,GAAG,CAAC,eAAe,IAAI;QAE7C,MAAM,aAAa,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACtD;YACA,UAAU;YACV,aAAa;YACb,YAAY;YACZ,OAAO;QACT;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,0BAA0B;QACxC,MAAM,UACJ,OAAO,UAAU,MAAM,OAAO,WAC9B,OAAO,WACP;QACF,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAQ,GAAG;YAAE,QAAQ;QAAI;IAC7D;AACF;;;IA1CsB;;AAAA,iPAAA","debugId":null}}]
}