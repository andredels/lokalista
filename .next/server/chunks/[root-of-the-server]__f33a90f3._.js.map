{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Craig/Desktop/WEB%20DEV/final%20project/deployment/lokalista/lib/supabase/serverClient.ts"],"sourcesContent":["import { cookies } from \"next/headers\";\nimport { createServerClient, type CookieOptions } from \"@supabase/ssr\";\n\nexport function createClient() {\n  const cookieStore = cookies();\n\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL as string;\n  const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY as string;\n\n  if (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error(\"Supabase env vars are missing. Set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY.\");\n  }\n\n  return createServerClient(supabaseUrl, supabaseAnonKey, {\n    cookies: {\n      get(name: string) {\n        return cookieStore.get(name)?.value;\n      },\n      set(name: string, value: string, options: CookieOptions) {\n        try {\n          cookieStore.set({ name, value, ...options });\n        } catch {}\n      },\n      remove(name: string, options: CookieOptions) {\n        try {\n          cookieStore.set({ name, value: \"\", ...options });\n        } catch {}\n      },\n    },\n  });\n}\n\n\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;AAEO,SAAS;IACd,MAAM,cAAc,IAAA,4IAAO;IAE3B,MAAM;IACN,MAAM;IAEN;;IAIA,OAAO,IAAA,iMAAkB,EAAC,aAAa,iBAAiB;QACtD,SAAS;YACP,KAAI,IAAY;gBACd,OAAO,YAAY,GAAG,CAAC,OAAO;YAChC;YACA,KAAI,IAAY,EAAE,KAAa,EAAE,OAAsB;gBACrD,IAAI;oBACF,YAAY,GAAG,CAAC;wBAAE;wBAAM;wBAAO,GAAG,OAAO;oBAAC;gBAC5C,EAAE,OAAM,CAAC;YACX;YACA,QAAO,IAAY,EAAE,OAAsB;gBACzC,IAAI;oBACF,YAAY,GAAG,CAAC;wBAAE;wBAAM,OAAO;wBAAI,GAAG,OAAO;oBAAC;gBAChD,EAAE,OAAM,CAAC;YACX;QACF;IACF;AACF","debugId":null}},
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Craig/Desktop/WEB%20DEV/final%20project/deployment/lokalista/app/api/users/metadata/route.ts"],"sourcesContent":["import { createClient } from \"@/lib/supabase/serverClient\";\r\nimport { NextRequest, NextResponse } from \"next/server\";\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const { userIds } = await request.json();\r\n    \r\n    if (!Array.isArray(userIds) || userIds.length === 0) {\r\n      return NextResponse.json({ error: \"userIds must be a non-empty array\" }, { status: 400 });\r\n    }\r\n\r\n    const supabase = createClient();\r\n    \r\n    // Get current user to verify they're authenticated\r\n    const { data: { user }, error: authError } = await supabase.auth.getUser();\r\n    \r\n    if (authError || !user) {\r\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\r\n    }\r\n\r\n    // Fetch user metadata for the requested user IDs\r\n    // Note: We can only get metadata for users we have access to\r\n    // For security, we'll only return metadata that's safe to share\r\n    const metadataMap: Record<string, { full_name?: string; name?: string }> = {};\r\n    \r\n    // Since we can't directly query auth.users, we'll return what we can from profiles\r\n    // The profiles table should have first_name and last_name\r\n    const { data: profiles, error: profilesError } = await supabase\r\n      .from(\"profiles\")\r\n      .select(\"id, first_name, last_name\")\r\n      .in(\"id\", userIds);\r\n    \r\n    if (profilesError) {\r\n      console.error(\"Error fetching profiles:\", profilesError);\r\n    } else if (profiles) {\r\n      // Convert profiles to metadata format\r\n      for (const profile of profiles) {\r\n        if (profile.first_name || profile.last_name) {\r\n          const fullName = `${profile.first_name || \"\"} ${profile.last_name || \"\"}`.trim();\r\n          if (fullName) {\r\n            metadataMap[profile.id] = { full_name: fullName };\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return NextResponse.json({ metadata: metadataMap });\r\n  } catch (error: any) {\r\n    console.error(\"Error in users/metadata route:\", error);\r\n    return NextResponse.json(\r\n      { error: error.message || \"Internal server error\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEtC,IAAI,CAAC,MAAM,OAAO,CAAC,YAAY,QAAQ,MAAM,KAAK,GAAG;YACnD,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAoC,GAAG;gBAAE,QAAQ;YAAI;QACzF;QAEA,MAAM,WAAW,IAAA,iJAAY;QAE7B,mDAAmD;QACnD,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;QAExE,IAAI,aAAa,CAAC,MAAM;YACtB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,iDAAiD;QACjD,6DAA6D;QAC7D,gEAAgE;QAChE,MAAM,cAAqE,CAAC;QAE5E,mFAAmF;QACnF,0DAA0D;QAC1D,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,aAAa,EAAE,GAAG,MAAM,SACpD,IAAI,CAAC,YACL,MAAM,CAAC,6BACP,EAAE,CAAC,MAAM;QAEZ,IAAI,eAAe;YACjB,QAAQ,KAAK,CAAC,4BAA4B;QAC5C,OAAO,IAAI,UAAU;YACnB,sCAAsC;YACtC,KAAK,MAAM,WAAW,SAAU;gBAC9B,IAAI,QAAQ,UAAU,IAAI,QAAQ,SAAS,EAAE;oBAC3C,MAAM,WAAW,GAAG,QAAQ,UAAU,IAAI,GAAG,CAAC,EAAE,QAAQ,SAAS,IAAI,IAAI,CAAC,IAAI;oBAC9E,IAAI,UAAU;wBACZ,WAAW,CAAC,QAAQ,EAAE,CAAC,GAAG;4BAAE,WAAW;wBAAS;oBAClD;gBACF;YACF;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,UAAU;QAAY;IACnD,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,MAAM,OAAO,IAAI;QAAwB,GAClD;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}