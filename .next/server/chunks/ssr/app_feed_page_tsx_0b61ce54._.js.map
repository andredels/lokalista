{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Craig/Desktop/WEB%20DEV/final%20project/deployment/lokalista/app/feed/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useRef, useEffect } from \"react\";\r\n\r\ninterface Message {\r\n  id: string;\r\n  content?: string;\r\n  isUser: boolean;\r\n  timestamp: Date;\r\n  isTyping?: boolean;\r\n}\r\n\r\ninterface ChatHistoryMessage {\r\n  role: \"user\" | \"assistant\";\r\n  content: string;\r\n}\r\n\r\nexport default function AIAssistantPage() {\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [inputMessage, setInputMessage] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const [userLocation, setUserLocation] = useState<[number, number] | null>(null);\r\n  const [chatHistory, setChatHistory] = useState<ChatHistoryMessage[]>([]);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const [locationReady, setLocationReady] = useState(false);\r\n  const [locationError, setLocationError] = useState(false);\r\n\r\n  // Get user's current location on mount\r\n  useEffect(() => {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        (position) => {\r\n          const coords: [number, number] = [position.coords.latitude, position.coords.longitude];\r\n          setUserLocation(coords);\r\n          setLocationReady(true);\r\n          console.log('Location detected:', coords);\r\n          \r\n          // Add welcome message once location is ready\r\n          setMessages([{\r\n            id: \"1\",\r\n            content: `Hello! I'm your AI assistant for Lokalista. I've detected your location and I can help you find the perfect restaurants, cafes, and events near you. What would you like to discover?`,\r\n            isUser: false,\r\n            timestamp: new Date(),\r\n          }]);\r\n          setChatHistory([{\r\n            role: \"assistant\",\r\n            content: `Hello! I'm your AI assistant for Lokalista. I've detected your location and can help you find the perfect spots nearby. What would you like to discover?`,\r\n          }]);\r\n        },\r\n        (error) => {\r\n          console.warn('Geolocation error:', error);\r\n          // If permission denied or error, use default location\r\n          setUserLocation([10.3157, 123.8854]); // Cebu City, Philippines\r\n          setLocationReady(true);\r\n          setLocationError(true);\r\n          \r\n          // Add welcome message with error notice\r\n          setMessages([{\r\n            id: \"1\",\r\n            content: \"Hello! I'm your AI assistant for Lokalista. I couldn't access your location, so I'll focus on Cebu City for now. Allow location access for hyper-local picks around you. What would you like to discover?\",\r\n            isUser: false,\r\n            timestamp: new Date(),\r\n          }]);\r\n          setChatHistory([{\r\n            role: \"assistant\",\r\n            content: \"Hello! I'm your AI assistant for Lokalista. I couldn't access your location, so I'll use Cebu City as our base. What would you like to discover around here?\",\r\n          }]);\r\n        }\r\n      );\r\n    } else {\r\n      // Fallback if geolocation not supported\r\n      setUserLocation([10.3157, 123.8854]);\r\n      setLocationReady(true);\r\n      setLocationError(true);\r\n      \r\n      setMessages([{\r\n        id: \"1\",\r\n        content: \"Hello! I'm your AI assistant for Lokalista. Location services aren't available, so we'll explore Cebu City by default. What would you like to discover?\",\r\n        isUser: false,\r\n        timestamp: new Date(),\r\n      }]);\r\n      setChatHistory([{\r\n        role: \"assistant\",\r\n        content: \"Hello! I'm your AI assistant for Lokalista. Location services aren't available, so let's explore Cebu City by default. What would you like to discover?\",\r\n      }]);\r\n    }\r\n  }, []);\r\n\r\n\r\n  const handleSendMessage = async () => {\r\n    if (!inputMessage.trim() || isLoading) return;\r\n\r\n    const rawInput = inputMessage.trim();\r\n    const userMessage: Message = {\r\n      id: Date.now().toString(),\r\n      content: rawInput,\r\n      isUser: true,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    setMessages(prev => [...prev, userMessage]);\r\n    setInputMessage(\"\");\r\n    setIsLoading(true);\r\n\r\n    // Build location context with detailed information\r\n    let locationContext = \"\";\r\n    if (userLocation) {\r\n      const [lat, lon] = userLocation;\r\n      locationContext = `IMPORTANT: The user's CURRENT LOCATION is at coordinates ${lat.toFixed(6)}, ${lon.toFixed(6)} (latitude, longitude). This is their exact current position. Base ALL recommendations on this specific location. Prioritize places within 1-2km of these coordinates.`;\r\n    } else if (locationError) {\r\n      locationContext = \"User location not available. Using Cebu City, Philippines (10.3157, 123.8854) as default location. Base recommendations on this area.\";\r\n    } else {\r\n      locationContext = \"User location is being detected. Using Cebu City, Philippines (10.3157, 123.8854) as default location for now.\";\r\n    }\r\n\r\n    const systemPrompt = [\r\n      \"You are Lokalista, an upbeat culinary concierge that provides location-based food recommendations.\",\r\n      \"CRITICAL: Always base your recommendations on the user's CURRENT LOCATION provided below, NOT on previous conversation history.\",\r\n      \"Each request should be treated independently based on where the user is RIGHT NOW.\",\r\n      locationContext,\r\n      \"Whenever the user mentions a specific neighborhood or landmark (e.g., IT Park, SM Seaside, Ayala Center), prioritize that area and mention it in your reply.\",\r\n      \"Provide specific, actionable recommendations for places near the user's current location.\",\r\n      \"Keep answers concise (4-6 sentences) and focused on the current location.\",\r\n      \"Do NOT reference previous conversations unless the user explicitly asks about them.\",\r\n    ].join(\" \");\r\n\r\n    // Only send the current message, not conversation history, to prioritize location\r\n    const payloadMessages = [\r\n      { role: \"system\", content: systemPrompt },\r\n      { role: \"user\", content: rawInput },\r\n    ];\r\n\r\n    let assistantContent =\r\n      \"Sorry, I couldn't fetch a response from our AI right now. Please try again in a moment.\";\r\n\r\n    try {\r\n      const response = await fetch(\"/api/chat\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ messages: payloadMessages }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorPayload = await response.json().catch(() => null);\r\n        const errorMessage = errorPayload?.error || `API error (${response.status})`;\r\n        \r\n        // Provide user-friendly error messages\r\n        if (response.status === 401) {\r\n          assistantContent = \"⚠️ Invalid API key. Please check your GROQ_API_KEY in the .env.local file. Make sure it's correct and starts with 'gsk_'.\";\r\n        } else if (response.status === 429) {\r\n          assistantContent = \"⏱️ Rate limit exceeded. Please try again in a moment.\";\r\n        } else {\r\n          assistantContent = `Sorry, I encountered an error: ${errorMessage}. Please try again.`;\r\n        }\r\n        \r\n        console.error(\"Chat completion error:\", errorMessage);\r\n      } else {\r\n        const data = await response.json();\r\n        const content = data?.choices?.[0]?.message?.content?.trim();\r\n        if (content) {\r\n          assistantContent = content;\r\n        }\r\n      }\r\n    } catch (error: any) {\r\n      console.error(\"Chat completion error:\", error);\r\n      assistantContent = error?.message \r\n        ? `Sorry, I encountered an error: ${error.message}. Please try again.`\r\n        : \"Sorry, I couldn't fetch a response from our AI right now. Please try again in a moment.\";\r\n    }\r\n\r\n    const assistantMessage: Message = {\r\n      id: (Date.now() + 1).toString(),\r\n      content: assistantContent,\r\n      isUser: false,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    setMessages(prev => [...prev, assistantMessage]);\r\n    // Only keep the last exchange for minimal context, but location is primary\r\n    setChatHistory([{ role: \"user\", content: rawInput }, { role: \"assistant\", content: assistantContent }]);\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  const quickActions = [\r\n    \"Good coffee spot near me\",\r\n    \"Budget-friendly places near me\",\r\n    \"Fast food near me\",\r\n    \"Cozy cafes for working\",\r\n    \"Quick meals nearby\",\r\n    \"Popular restaurants near me\"\r\n  ];\r\n\r\n  return (\r\n    <div className=\"ai-assistant-bg animate-fade-in\">\r\n      {/* Header */}\r\n      <div className=\"bg-ai-surface border-b border-ai shadow-ai animate-fade-in-down\">\r\n        <div className=\"max-w-4xl mx-auto px-4 py-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className=\"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center animate-scale-in\">\r\n              <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n              </svg>\r\n            </div>\r\n          <div>\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">AI Assistant</h1>\r\n              <p className=\"text-gray-600\">Your personal food discovery companion</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-4xl mx-auto px-4 py-6\">\r\n        <div className=\"bg-ai-surface rounded-2xl shadow-ai border border-ai overflow-hidden backdrop-blur\">\r\n          {/* Messages Container */}\r\n          <div className=\"h-[600px] overflow-y-auto p-6 space-y-4\">\r\n            {messages.map((message) => (\r\n              <div key={message.id} className=\"space-y-4 animate-fade-in-up\">\r\n                {/* User Message */}\r\n                {message.isUser && message.content && (\r\n                  <div className=\"flex justify-end\">\r\n                    <div className=\"max-w-xs lg:max-w-md px-4 py-3 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 text-white hover-scale\">\r\n                      <p className=\"text-sm whitespace-pre-wrap\">{message.content}</p>\r\n                      <p className=\"text-xs mt-1 text-purple-100\">\r\n                        {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n                \r\n                {/* AI Message */}\r\n                {!message.isUser && (\r\n                  <div className=\"space-y-4\">\r\n                    {message.content && (\r\n                      <div className=\"flex justify-start\">\r\n                        <div className=\"max-w-xs lg:max-w-md px-4 py-3 rounded-2xl bg-gray-100 text-gray-900 hover-scale\">\r\n                          <p className=\"text-sm whitespace-pre-wrap\">{message.content}</p>\r\n                          <p className=\"text-xs mt-1 text-gray-500\">\r\n                            {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n            \r\n            {isLoading && (\r\n              <div className=\"flex justify-start\">\r\n                <div className=\"bg-gray-100 text-gray-900 max-w-xs lg:max-w-md px-4 py-3 rounded-2xl\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center\">\r\n                      <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n                      </svg>\r\n                    </div>\r\n                    <div className=\"flex space-x-1\">\r\n                      <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"></div>\r\n                      <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\r\n                      <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div ref={messagesEndRef} />\r\n          </div>\r\n\r\n          {/* Quick Actions */}\r\n          {locationReady && (\r\n            <div className=\"px-6 py-4 bg-ai-muted border-t border-ai\">\r\n              <p className=\"text-sm text-gray-600 mb-3\">Quick actions:</p>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {quickActions.map((action, index) => (\r\n                  <button\r\n                    key={index}\r\n                    onClick={() => setInputMessage(action)}\r\n                    className=\"px-3 py-1.5 text-xs bg-ai-card border border-ai rounded-full hover:bg-muted transition-colors\"\r\n                  >\r\n                    {action}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Input Area */}\r\n          <div className=\"p-6 bg-ai-surface border-t border-ai\">\r\n            {!locationReady ? (\r\n              <div className=\"flex items-center justify-center gap-3 py-4\">\r\n                <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-500\"></div>\r\n                <p className=\"text-gray-600\">Getting your location...</p>\r\n              </div>\r\n            ) : (\r\n              <>\r\n                {locationError && (\r\n                  <div className=\"mb-4 p-3 bg-yellow-50/80 border border-yellow-200 rounded-lg\">\r\n                    <p className=\"text-sm text-yellow-800 dark:text-yellow-100\">\r\n                      ⚠️ Location permission denied. Showing results for Manila area. Allow location access for better recommendations.\r\n                    </p>\r\n                  </div>\r\n                )}\r\n                {userLocation && !locationError && (\r\n                  <div className=\"mb-4 p-3 bg-green-50/80 border border-green-200 rounded-lg\">\r\n                    <p className=\"text-sm text-green-800 dark:text-green-100\">\r\n                      ✓ Location detected! Finding places near you.\r\n                    </p>\r\n                  </div>\r\n                )}\r\n                <div className=\"flex gap-3\">\r\n                  <div className=\"flex-1 relative\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={inputMessage}\r\n                      onChange={(e) => setInputMessage(e.target.value)}\r\n                      onKeyPress={handleKeyPress}\r\n                      placeholder=\"Ask anything about places, restaurants, or cafes...\"\r\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n                      disabled={isLoading || !locationReady}\r\n                    />\r\n                  </div>\r\n                <button\r\n                    onClick={handleSendMessage}\r\n                    disabled={!inputMessage.trim() || isLoading || !locationReady}\r\n                    className=\"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center gap-2\"\r\n                  >\r\n                    {isLoading ? (\r\n                      <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                    ) : (\r\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\" />\r\n                      </svg>\r\n                    )}\r\n                    Send\r\n                </button>\r\n              </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Features Section */}\r\n        <div className=\"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n          <div className=\"bg-ai-card p-6 rounded-xl shadow-lg border border-ai\">\r\n            <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center mb-4\">\r\n              <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n              </svg>\r\n            </div>\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Location-Based</h3>\r\n            <p className=\"text-ai-muted text-sm\">Find restaurants and cafes near your current location with precise recommendations.</p>\r\n          </div>\r\n\r\n          <div className=\"bg-ai-card p-6 rounded-xl shadow-lg border border-ai\">\r\n            <div className=\"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-500 rounded-xl flex items-center justify-center mb-4\">\r\n              <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n              </svg>\r\n            </div>\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Smart Filtering</h3>\r\n            <p className=\"text-ai-muted text-sm\">Filter by cuisine, price range, features, and preferences to find exactly what you want.</p>\r\n          </div>\r\n\r\n          <div className=\"bg-ai-card p-6 rounded-xl shadow-lg border border-ai\">\r\n            <div className=\"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl flex items-center justify-center mb-4\">\r\n              <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\" />\r\n              </svg>\r\n            </div>\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Personalized</h3>\r\n            <p className=\"text-ai-muted text-sm\">Get recommendations tailored to your preferences, budget, and dining preferences.</p>\r\n          </div>\r\n          </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}