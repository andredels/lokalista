{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Craig/Desktop/WEB%20DEV/final%20project/deployment/lokalista/app/ui/Modal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect } from \"react\";\r\n\r\ntype ModalProps = {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  title?: string;\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  showCloseButton?: boolean;\r\n};\r\n\r\nexport default function Modal({ open, onClose, title, children, className = \"\", showCloseButton = true }: ModalProps) {\r\n  useEffect(() => {\r\n    function onKey(e: KeyboardEvent) {\r\n      if (e.key === \"Escape\") onClose();\r\n    }\r\n    if (open) {\r\n      document.addEventListener(\"keydown\", onKey);\r\n      document.body.style.overflow = \"hidden\";\r\n    }\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", onKey);\r\n      document.body.style.overflow = \"\";\r\n    };\r\n  }, [open, onClose]);\r\n\r\n  if (!open) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n      <div className=\"absolute inset-0 bg-black/50\" onClick={onClose} />\r\n      <div role=\"dialog\" aria-modal=\"true\" className={`relative z-10 w-full rounded-lg border border-border/60 bg-background shadow-xl ${className || 'max-w-md p-5'}`}>\r\n        {title && <div className=\"h2 mb-2\">{title}</div>}\r\n        {children}\r\n        {showCloseButton && (\r\n          <div className=\"mt-4 flex justify-end\">\r\n            <button onClick={onClose} className=\"h-9 px-4 rounded-md border border-border/60\">Close</button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAae,SAAS,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,QAAQ,EAAE,YAAY,EAAE,EAAE,kBAAkB,IAAI,EAAc;IAClH,IAAA,kNAAS,EAAC;QACR,SAAS,MAAM,CAAgB;YAC7B,IAAI,EAAE,GAAG,KAAK,UAAU;QAC1B;QACA,IAAI,MAAM;YACR,SAAS,gBAAgB,CAAC,WAAW;YACrC,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;QACjC;QACA,OAAO;YACL,SAAS,mBAAmB,CAAC,WAAW;YACxC,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;QACjC;IACF,GAAG;QAAC;QAAM;KAAQ;IAElB,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;gBAA+B,SAAS;;;;;;0BACvD,8OAAC;gBAAI,MAAK;gBAAS,cAAW;gBAAO,WAAW,CAAC,gFAAgF,EAAE,aAAa,gBAAgB;;oBAC7J,uBAAS,8OAAC;wBAAI,WAAU;kCAAW;;;;;;oBACnC;oBACA,iCACC,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAO,SAAS;4BAAS,WAAU;sCAA8C;;;;;;;;;;;;;;;;;;;;;;;AAM9F","debugId":null}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Craig/Desktop/WEB%20DEV/final%20project/deployment/lokalista/app/community/page.tsx"],"sourcesContent":["\"use client\";\n\n// Clone of journey page but with /community redirects\nimport { useEffect, useMemo, useState } from \"react\";\nimport { createClient } from \"@/lib/supabase/browserClient\";\nimport Modal from \"@/app/ui/Modal\";\n\ntype Profile = {\n  id: string;\n  first_name?: string | null;\n  last_name?: string | null;\n};\n\ntype Post = {\n  id: string;\n  user_id: string;\n  content: string;\n  created_at: string;\n  profiles?: Profile | null;\n  likes_count?: number;\n  comments_count?: number;\n  liked_by_me?: boolean;\n  image_url?: string | null;\n};\n\ntype Comment = {\n  id: string;\n  post_id: string;\n  user_id: string;\n  content: string;\n  created_at: string;\n  profiles?: Profile | null;\n};\n\nexport default function CommunityPage() {\n  const supabase = useMemo(() => createClient(), []);\n  const [userId, setUserId] = useState<string | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [content, setContent] = useState(\"\");\n  const [submitting, setSubmitting] = useState(false);\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [expandedPostIds, setExpandedPostIds] = useState<Set<string>>(new Set());\n  const [commentsByPost, setCommentsByPost] = useState<Record<string, Comment[]>>({});\n  const [newCommentContent, setNewCommentContent] = useState<Record<string, string>>({});\n  const [imageFile, setImageFile] = useState<File | null>(null);\n  const [imagePreview, setImagePreview] = useState<string | null>(null);\n  const [selectedPost, setSelectedPost] = useState<Post | null>(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [deletingPost, setDeletingPost] = useState<string | null>(null);\n  const [deletingComment, setDeletingComment] = useState<string | null>(null);\n\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      const { data } = await supabase.auth.getUser();\n      if (!mounted) return;\n      const uid = data.user?.id ?? null;\n      setUserId(uid);\n      await loadPosts(uid);\n      setLoading(false);\n    })();\n    const { data: sub } = supabase.auth.onAuthStateChange(async (_e, session) => {\n      const uid = session?.user?.id ?? null;\n      setUserId(uid);\n      await loadPosts(uid);\n    });\n    return () => {\n      mounted = false;\n      sub.subscription.unsubscribe();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  async function loadPosts(currentUserId: string | null = userId) {\n    const { data, error } = await supabase\n      .from(\"posts\")\n      .select(\n        `id, user_id, content, image_url, created_at, profiles:profiles!posts_user_id_fkey(id, first_name, last_name),\n         likes_count:likes(count), comments_count:comments(count)`\n      )\n      .order(\"created_at\", { ascending: false });\n\n    if (error) {\n      console.error(error);\n      return;\n    }\n\n    const normalized = (data as any[]).map((row) => ({\n      ...row,\n      likes_count: Array.isArray(row.likes_count) ? row.likes_count[0]?.count ?? 0 : row.likes_count ?? 0,\n      comments_count: Array.isArray(row.comments_count) ? row.comments_count[0]?.count ?? 0 : row.comments_count ?? 0,\n      liked_by_me: false,\n    })) as Post[];\n\n    if (currentUserId && normalized.length) {\n      const postIds = normalized.map((p) => p.id);\n      const { data: myLikes, error: likesErr } = await supabase\n        .from(\"likes\")\n        .select(\"post_id\")\n        .eq(\"user_id\", currentUserId)\n        .in(\"post_id\", postIds);\n      if (!likesErr && myLikes) {\n        const likedSet = new Set(myLikes.map((l: any) => l.post_id));\n        for (const p of normalized) p.liked_by_me = likedSet.has(p.id);\n      }\n    }\n\n    setPosts(normalized);\n  }\n\n  async function submitPost(e: React.FormEvent) {\n    e.preventDefault();\n    if (!userId) {\n      window.location.href = \"/auth/login?next=/community\";\n      return;\n    }\n    \n    // Validate that we have either content or image\n    if (!content.trim() && !imageFile) {\n      alert(\"Please add a caption or an image to post.\");\n      return;\n    }\n    \n    // Require image for community page\n    if (!imageFile) {\n      alert(\"Please add an image to post in the community page.\");\n      return;\n    }\n    \n    setSubmitting(true);\n    let imageUrl: string | null = null;\n    console.log(\"Submitting post...\");\n\n    try {\n      // Ensure user has a profile before posting (to satisfy foreign key constraint)\n      const { data: profileData, error: profileError } = await supabase\n        .from(\"profiles\")\n        .select(\"id\")\n        .eq(\"id\", userId)\n        .maybeSingle();\n      \n      if (profileError && profileError.code !== 'PGRST116') {\n        console.error(\"Error checking profile:\", profileError);\n      }\n      \n      // Create a basic profile if it doesn't exist\n      if (!profileData) {\n        const { error: createProfileError } = await supabase\n          .from(\"profiles\")\n          .upsert({\n            id: userId,\n            first_name: null,\n            last_name: null,\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n          }, { onConflict: \"id\" });\n        \n        if (createProfileError) {\n          console.error(\"Error creating profile:\", createProfileError);\n          // Continue anyway - might work if RLS allows it\n        }\n      }\n      \n      // Upload image if provided\n      if (imageFile) {\n        try {\n          console.log(\"Uploading image...\");\n          const ext = imageFile.name.split(\".\").pop()?.toLowerCase() || \"jpg\";\n          const path = `${userId}/${Date.now()}-${Math.random().toString(36).slice(2)}.${ext}`;\n          \n          const { error: upErr, data: uploadData } = await supabase\n            .storage\n            .from(\"post-images\")\n            .upload(path, imageFile, {\n              cacheControl: \"3600\",\n              upsert: false,\n              contentType: imageFile.type || \"image/jpeg\",\n            });\n          \n          if (upErr) {\n            console.error(\"Upload error:\", upErr);\n            throw new Error(`Failed to upload image: ${upErr.message}`);\n          }\n          \n          const { data: pub } = supabase.storage.from(\"post-images\").getPublicUrl(path);\n          imageUrl = pub.publicUrl;\n        } catch (uploadErr: any) {\n          console.error(\"Image upload failed:\", uploadErr);\n          throw new Error(`Image upload failed: ${uploadErr.message || \"Unknown error\"}`);\n        }\n      }\n      \n      // Insert post\n      console.log(\"Inserting post...\");\n      const { error: insertError, data: insertData } = await supabase\n        .from(\"posts\")\n        .insert({ \n          content: content.trim() || null, \n          image_url: imageUrl, \n          user_id: userId \n        })\n        .select()\n        .single();\n      \n      if (insertError) {\n        console.error(\"Insert error:\", insertError);\n        throw new Error(`Failed to create post: ${insertError.message}`);\n      }\n      \n      // Success - clear form and reload posts\n      setContent(\"\");\n      setImageFile(null);\n      setImagePreview(null);\n      \n      // Reload posts\n      console.log(\"Post created successfully. Reloading posts...\");\n      await loadPosts(userId);\n      \n    } catch (err: any) {\n      console.error(\"Error in submitPost:\", err);\n      const errorMessage = err?.message || err?.error?.message || \"Failed to post. Please try again.\";\n      alert(errorMessage);\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  async function toggleLike(post: Post) {\n    if (!userId) {\n      window.location.href = \"/auth/login?next=/community\";\n      return;\n    }\n    \n    const wasLiked = post.liked_by_me;\n    \n    // Optimistic update first\n    if (selectedPost && selectedPost.id === post.id) {\n      setSelectedPost({\n        ...selectedPost,\n        liked_by_me: !wasLiked,\n        likes_count: Math.max(0, (selectedPost.likes_count ?? 0) + (wasLiked ? -1 : 1))\n      });\n    }\n    \n    try {\n      if (wasLiked) {\n        const { error } = await supabase.from(\"likes\").delete().match({ post_id: post.id, user_id: userId });\n        if (error) {\n          console.error(\"Error unliking post:\", error);\n          alert(error.message);\n          // Revert optimistic update on error\n          if (selectedPost && selectedPost.id === post.id) {\n            setSelectedPost({\n              ...selectedPost,\n              liked_by_me: wasLiked,\n              likes_count: (selectedPost.likes_count ?? 0)\n            });\n          }\n          return;\n        }\n      } else {\n        // Check if like already exists to avoid duplicate key errors\n        const { data: existingLike } = await supabase\n          .from(\"likes\")\n          .select(\"id\")\n          .eq(\"post_id\", post.id)\n          .eq(\"user_id\", userId)\n          .maybeSingle();\n        \n        if (!existingLike) {\n          const { error } = await supabase\n            .from(\"likes\")\n            .insert({ post_id: post.id, user_id: userId });\n          if (error) {\n            console.error(\"Error liking post:\", error);\n            alert(error.message);\n            // Revert optimistic update on error\n            if (selectedPost && selectedPost.id === post.id) {\n              setSelectedPost({\n                ...selectedPost,\n                liked_by_me: wasLiked,\n                likes_count: (selectedPost.likes_count ?? 0)\n              });\n            }\n            return;\n          }\n        }\n      }\n      \n      // Reload posts to get accurate counts\n      await loadPosts(userId);\n      \n      // Update selectedPost with fresh data\n      const updatedPosts = await supabase\n        .from(\"posts\")\n        .select(\n          `id, user_id, content, image_url, created_at, profiles:profiles!posts_user_id_fkey(id, first_name, last_name),\n           likes_count:likes(count), comments_count:comments(count)`\n        )\n        .eq(\"id\", post.id)\n        .single();\n      \n      if (updatedPosts.data && selectedPost && selectedPost.id === post.id) {\n        const normalized = {\n          ...updatedPosts.data,\n          likes_count: Array.isArray(updatedPosts.data.likes_count) ? updatedPosts.data.likes_count[0]?.count ?? 0 : updatedPosts.data.likes_count ?? 0,\n          comments_count: Array.isArray(updatedPosts.data.comments_count) ? updatedPosts.data.comments_count[0]?.count ?? 0 : updatedPosts.data.comments_count ?? 0,\n          liked_by_me: false,\n        } as Post;\n        \n        // Check if user liked this post\n        const { data: myLike } = await supabase\n          .from(\"likes\")\n          .select(\"post_id\")\n          .eq(\"post_id\", post.id)\n          .eq(\"user_id\", userId)\n          .maybeSingle();\n        \n        normalized.liked_by_me = !!myLike;\n        setSelectedPost(normalized);\n      }\n    } catch (error: any) {\n      console.error(\"Error in toggleLike:\", error);\n      alert(error?.message || \"Failed to update like. Please try again.\");\n    }\n  }\n\n  async function loadComments(postId: string) {\n    const { data, error } = await supabase\n      .from(\"comments\")\n      .select(\"id, post_id, user_id, content, created_at, profiles:profiles!comments_user_id_fkey(id, first_name, last_name)\")\n      .eq(\"post_id\", postId)\n      .order(\"created_at\", { ascending: true });\n    if (error) return alert(error.message);\n    setCommentsByPost((prev) => ({ ...prev, [postId]: (data as Comment[]) || [] }));\n  }\n\n  async function deletePost(postId: string) {\n    if (!userId) {\n      alert(\"You must be logged in to delete a post.\");\n      return;\n    }\n    \n    if (deletingPost === postId) {\n      return; // Already deleting\n    }\n    \n    console.log(\"Attempting to delete post:\", postId, \"User ID:\", userId);\n    \n    if (!confirm(\"Are you sure you want to delete this post? This action cannot be undone.\")) {\n      return;\n    }\n    \n    setDeletingPost(postId);\n    \n    try {\n      // First, delete all related data (likes and comments)\n      const { error: likesError } = await supabase.from(\"likes\").delete().eq(\"post_id\", postId);\n      if (likesError) {\n        console.warn(\"Error deleting likes (continuing anyway):\", likesError);\n      }\n      \n      const { error: commentsError } = await supabase.from(\"comments\").delete().eq(\"post_id\", postId);\n      if (commentsError) {\n        console.warn(\"Error deleting comments (continuing anyway):\", commentsError);\n      }\n      \n      // Delete the post image from storage if it exists\n      const { data: postData, error: fetchError } = await supabase\n        .from(\"posts\")\n        .select(\"image_url, user_id\")\n        .eq(\"id\", postId)\n        .single();\n      \n      if (fetchError) {\n        console.error(\"Error fetching post data:\", fetchError);\n        throw new Error(`Failed to fetch post: ${fetchError.message}`);\n      }\n      \n      // Verify ownership\n      if (postData.user_id !== userId) {\n        alert(\"You can only delete your own posts.\");\n        return;\n      }\n      \n      if (postData?.image_url) {\n        // Extract path from URL\n        const urlParts = postData.image_url.split(\"/post-images/\");\n        if (urlParts.length > 1) {\n          const filePath = urlParts[1].split(\"?\")[0];\n          const { error: storageError } = await supabase.storage.from(\"post-images\").remove([filePath]);\n          if (storageError) {\n            console.warn(\"Error deleting image from storage (continuing anyway):\", storageError);\n          }\n        }\n      }\n      \n      // Delete the post\n      const { error, data } = await supabase\n        .from(\"posts\")\n        .delete()\n        .eq(\"id\", postId)\n        .eq(\"user_id\", userId)\n        .select();\n      \n      if (error) {\n        console.error(\"Error deleting post:\", error);\n        throw new Error(`Failed to delete post: ${error.message}`);\n      }\n      \n      if (!data || data.length === 0) {\n        throw new Error(\"Post not found or you don't have permission to delete it.\");\n      }\n      \n      console.log(\"Post deleted successfully\");\n      \n      // Close modal if the deleted post was open\n      if (selectedPost && selectedPost.id === postId) {\n        closeModal();\n      }\n      \n      // Reload posts\n      await loadPosts(userId);\n    } catch (error: any) {\n      console.error(\"Error deleting post:\", error);\n      alert(error?.message || \"Failed to delete post. Please try again.\");\n    } finally {\n      setDeletingPost(null);\n    }\n  }\n\n  async function deleteComment(commentId: string, postId: string) {\n    if (!userId) {\n      alert(\"You must be logged in to delete a comment.\");\n      return;\n    }\n    \n    if (deletingComment === commentId) {\n      return; // Already deleting\n    }\n    \n    console.log(\"Attempting to delete comment:\", commentId, \"User ID:\", userId);\n    \n    if (!confirm(\"Are you sure you want to delete this comment?\")) {\n      return;\n    }\n    \n    setDeletingComment(commentId);\n    \n    try {\n      // First verify ownership\n      const { data: commentData, error: fetchError } = await supabase\n        .from(\"comments\")\n        .select(\"id, user_id\")\n        .eq(\"id\", commentId)\n        .single();\n      \n      if (fetchError) {\n        console.error(\"Error fetching comment:\", fetchError);\n        throw new Error(`Failed to fetch comment: ${fetchError.message}`);\n      }\n      \n      if (!commentData) {\n        throw new Error(\"Comment not found.\");\n      }\n      \n      // Verify ownership\n      if (commentData.user_id !== userId) {\n        alert(\"You can only delete your own comments.\");\n        return;\n      }\n      \n      // Delete the comment\n      const { error, data } = await supabase\n        .from(\"comments\")\n        .delete()\n        .eq(\"id\", commentId)\n        .eq(\"user_id\", userId)\n        .select();\n      \n      if (error) {\n        console.error(\"Error deleting comment:\", error);\n        throw new Error(`Failed to delete comment: ${error.message}`);\n      }\n      \n      if (!data || data.length === 0) {\n        throw new Error(\"Comment not found or you don't have permission to delete it.\");\n      }\n      \n      console.log(\"Comment deleted successfully\");\n      \n      // Reload comments and update post count\n      await loadComments(postId);\n      await loadPosts(userId);\n      \n      // Update selectedPost if it's the same post\n      if (selectedPost && selectedPost.id === postId) {\n        const updatedPost = posts.find(p => p.id === postId);\n        if (updatedPost) {\n          setSelectedPost({\n            ...updatedPost,\n            comments_count: Math.max(0, (updatedPost.comments_count ?? 0) - 1)\n          });\n        }\n      }\n    } catch (error: any) {\n      console.error(\"Error deleting comment:\", error);\n      alert(error?.message || \"Failed to delete comment. Please try again.\");\n    } finally {\n      setDeletingComment(null);\n    }\n  }\n\n  async function submitComment(postId: string) {\n    if (!userId) {\n      window.location.href = \"/auth/login?next=/community\";\n      return;\n    }\n    \n    const text = (newCommentContent[postId] || \"\").trim();\n    if (!text) {\n      alert(\"Please enter a comment\");\n      return;\n    }\n    \n    // Optimistic update\n    const previousCount = selectedPost?.comments_count ?? 0;\n    if (selectedPost && selectedPost.id === postId) {\n      setSelectedPost({\n        ...selectedPost,\n        comments_count: previousCount + 1\n      });\n    }\n    \n    // Clear input immediately\n    setNewCommentContent((p) => ({ ...p, [postId]: \"\" }));\n    \n    try {\n      const { error, data } = await supabase\n        .from(\"comments\")\n        .insert({ post_id: postId, content: text, user_id: userId })\n        .select()\n        .single();\n      \n      if (error) {\n        console.error(\"Error submitting comment:\", error);\n        alert(error.message);\n        // Revert optimistic update on error\n        if (selectedPost && selectedPost.id === postId) {\n          setSelectedPost({\n            ...selectedPost,\n            comments_count: previousCount\n          });\n        }\n        // Restore input text\n        setNewCommentContent((p) => ({ ...p, [postId]: text }));\n        return;\n      }\n      \n      // Reload comments to show the new one\n      await loadComments(postId);\n      \n      // Reload posts to get accurate comment count\n      await loadPosts(userId);\n      \n      // Update selectedPost with fresh data\n      const updatedPosts = await supabase\n        .from(\"posts\")\n        .select(\n          `id, user_id, content, image_url, created_at, profiles:profiles!posts_user_id_fkey(id, first_name, last_name),\n           likes_count:likes(count), comments_count:comments(count)`\n        )\n        .eq(\"id\", postId)\n        .single();\n      \n      if (updatedPosts.data && selectedPost && selectedPost.id === postId) {\n        const normalized = {\n          ...updatedPosts.data,\n          likes_count: Array.isArray(updatedPosts.data.likes_count) ? updatedPosts.data.likes_count[0]?.count ?? 0 : updatedPosts.data.likes_count ?? 0,\n          comments_count: Array.isArray(updatedPosts.data.comments_count) ? updatedPosts.data.comments_count[0]?.count ?? 0 : updatedPosts.data.comments_count ?? 0,\n          liked_by_me: selectedPost.liked_by_me, // Preserve like status\n        } as Post;\n        \n        setSelectedPost(normalized);\n      }\n    } catch (error: any) {\n      console.error(\"Error in submitComment:\", error);\n      alert(error?.message || \"Failed to post comment. Please try again.\");\n      // Revert optimistic update on error\n      if (selectedPost && selectedPost.id === postId) {\n        setSelectedPost({\n          ...selectedPost,\n          comments_count: previousCount\n        });\n      }\n      // Restore input text\n      setNewCommentContent((p) => ({ ...p, [postId]: text }));\n    }\n  }\n\n  function toggleExpanded(postId: string) {\n    setExpandedPostIds((prev) => {\n      const next = new Set(prev);\n      if (next.has(postId)) next.delete(postId);\n      else next.add(postId);\n      return next;\n    });\n    if (!commentsByPost[postId]) void loadComments(postId);\n  }\n\n  function openPostModal(post: Post) {\n    setSelectedPost(post);\n    setIsModalOpen(true);\n    if (!commentsByPost[post.id]) {\n      void loadComments(post.id);\n    }\n  }\n\n  function closeModal() {\n    setIsModalOpen(false);\n    setSelectedPost(null);\n  }\n\n  // Filter posts to only show those with images\n  const postsWithImages = useMemo(() => {\n    return posts.filter(post => post.image_url);\n  }, [posts]);\n\n  // Sync selectedPost with updated posts when posts change (for accurate counts)\n  useEffect(() => {\n    if (selectedPost && isModalOpen && posts.length > 0) {\n      const updatedPost = posts.find(p => p.id === selectedPost.id);\n      if (updatedPost) {\n        // Only update if the post data has actually changed (to avoid unnecessary re-renders)\n        if (updatedPost.likes_count !== selectedPost.likes_count || \n            updatedPost.comments_count !== selectedPost.comments_count ||\n            updatedPost.liked_by_me !== selectedPost.liked_by_me) {\n          setSelectedPost(updatedPost);\n        }\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [posts, isModalOpen]);\n\n  // Handle paste image functionality\n  useEffect(() => {\n    const handlePaste = async (e: ClipboardEvent) => {\n      if (!userId || submitting) return;\n      \n      const items = e.clipboardData?.items;\n      if (!items) return;\n\n      // Look for image in clipboard\n      for (let i = 0; i < items.length; i++) {\n        const item = items[i];\n        \n        // Check if the item is an image\n        if (item.type.indexOf('image') !== -1) {\n          e.preventDefault();\n          \n          const file = item.getAsFile();\n          if (file) {\n            // Validate file type\n            if (!file.type.startsWith('image/')) {\n              alert('Please paste an image file');\n              return;\n            }\n            \n            // Validate file size (max 10MB)\n            if (file.size > 10 * 1024 * 1024) {\n              alert('Image is too large. Maximum size is 10MB');\n              return;\n            }\n            \n            // Set the image file and preview\n            setImageFile(file);\n            setImagePreview(URL.createObjectURL(file));\n          }\n          break;\n        }\n      }\n    };\n\n    // Add paste event listener to the document\n    document.addEventListener('paste', handlePaste);\n    \n    return () => {\n      document.removeEventListener('paste', handlePaste);\n    };\n  }, [userId, submitting]);\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"container max-w-7xl py-6\">\n        <h1 className=\"text-3xl font-bold mb-6\">Community</h1>\n\n        {/* Composer */}\n        <form onSubmit={submitPost} className=\"bg-white border border-gray-200 rounded-xl p-4 mb-6 shadow-sm\">\n          <textarea\n            value={content}\n            onChange={(e) => setContent(e.target.value)}\n            placeholder={userId ? \"Share something with the community... (You can paste an image here!)\" : \"Sign in to post\"}\n            className=\"w-full resize-none outline-none min-h-[90px]\"\n            disabled={!userId || submitting}\n            onPaste={(e) => {\n              // Let the global paste handler handle images\n              // This prevents default text paste behavior for images\n              const items = e.clipboardData?.items;\n              if (items) {\n                for (let i = 0; i < items.length; i++) {\n                  if (items[i].type.indexOf('image') !== -1) {\n                    e.preventDefault();\n                    return;\n                  }\n                }\n              }\n            }}\n          />\n          {imagePreview && (\n            <div className=\"mt-3\">\n              <img src={imagePreview} alt=\"Selected\" className=\"max-h-64 rounded-lg border\" />\n            </div>\n          )}\n          <div className=\"flex items-center justify-between mt-3\">\n            <label className=\"inline-flex items-center gap-2 text-sm text-gray-700 cursor-pointer\">\n              <input\n                type=\"file\"\n                accept=\"image/*\"\n                className=\"hidden\"\n                disabled={!userId || submitting}\n                onChange={(e) => {\n                  const file = e.target.files?.[0] || null;\n                  setImageFile(file);\n                  setImagePreview(file ? URL.createObjectURL(file) : null);\n                }}\n              />\n              <span className=\"px-3 h-9 inline-flex items-center rounded-md border border-gray-300 hover:bg-gray-50\">ðŸ“· Add image</span>\n              {imageFile && <span className=\"text-gray-500 text-sm\">{imageFile.name}</span>}\n            </label>\n            <div className=\"flex items-center gap-3\">\n              <span className=\"text-sm text-gray-500\">{content.length}/280</span>\n              <button\n                type=\"submit\"\n                disabled={!userId || submitting || content.length > 280 || !imageFile}\n                className=\"px-4 h-9 rounded-full bg-[#8c52ff] text-white disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {submitting ? \"Posting...\" : \"Post\"}\n              </button>\n            </div>\n          </div>\n        </form>\n\n        {/* Pinterest-style Masonry Grid */}\n        {loading ? (\n          <div className=\"text-center text-gray-500 py-12\">Loadingâ€¦</div>\n        ) : postsWithImages.length === 0 ? (\n          <div className=\"text-center text-gray-500 py-12\">\n            <p className=\"text-lg mb-2\">No posts with images yet.</p>\n            <p className=\"text-sm\">Be the first to share a photo!</p>\n          </div>\n        ) : (\n          <div \n            className=\"columns-1 sm:columns-2 md:columns-3 lg:columns-4 xl:columns-5 gap-4\"\n            style={{ columnFill: 'balance' }}\n          >\n            {postsWithImages.map((post) => (\n              <div\n                key={post.id}\n                className=\"break-inside-avoid mb-4 bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow cursor-pointer border border-gray-200\"\n                onClick={() => openPostModal(post)}\n              >\n                {post.image_url && (\n                  <div className=\"relative w-full\">\n                    <img\n                      src={post.image_url}\n                      alt={post.content || \"Post image\"}\n                      className=\"w-full h-auto object-cover\"\n                      loading=\"lazy\"\n                    />\n                    {/* Overlay with likes and comments count */}\n                    <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-3\">\n                      <div className=\"flex items-center gap-4 text-white text-sm\">\n                        <div className=\"flex items-center gap-1\">\n                          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill={post.liked_by_me ? \"currentColor\" : \"none\"} stroke=\"currentColor\" strokeWidth=\"2\">\n                            <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\"/>\n                          </svg>\n                          <span>{post.likes_count ?? 0}</span>\n                        </div>\n                        <div className=\"flex items-center gap-1\">\n                          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                            <path d=\"M21 15a2 2 0 01-2 2H8l-4 4V5a2 2 0 012-2h13a2 2 0 012 2v10z\"/>\n                          </svg>\n                          <span>{post.comments_count ?? 0}</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Post Detail Modal */}\n        <Modal open={isModalOpen} onClose={closeModal} title=\"\" className=\"max-w-5xl p-0\" showCloseButton={false}>\n          {selectedPost && (\n            <div className=\"w-full bg-white rounded-lg overflow-hidden\">\n              {/* Close button in top right */}\n              <button \n                onClick={closeModal} \n                className=\"absolute top-4 right-4 z-10 w-8 h-8 rounded-full bg-black/50 hover:bg-black/70 text-white flex items-center justify-center transition-colors\"\n                aria-label=\"Close modal\"\n              >\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <path d=\"M18 6L6 18M6 6l12 12\"/>\n                </svg>\n              </button>\n\n              <div className=\"flex flex-col md:flex-row max-h-[90vh]\">\n                {/* Image Section */}\n                <div className=\"md:w-1/2 bg-black flex items-center justify-center\">\n                  {selectedPost.image_url && (\n                    <img \n                      src={selectedPost.image_url} \n                      alt=\"Post image\" \n                      className=\"w-full h-auto max-h-[90vh] object-contain\" \n                    />\n                  )}\n                </div>\n\n                {/* Content Section */}\n                <div className=\"md:w-1/2 flex flex-col max-h-[90vh] overflow-hidden relative\">\n                  {/* Author and Caption Section - Combined */}\n                  <div className=\"p-4 border-b border-gray-200 flex items-start gap-3\">\n                    <div className=\"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-sm font-medium flex-shrink-0\">\n                      {(((selectedPost.profiles?.first_name || \"\") + (selectedPost.profiles?.last_name ? ` ${selectedPost.profiles.last_name}` : \"\")) || selectedPost.user_id || \"?\").slice(0, 1).toUpperCase()}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <span className=\"font-semibold text-gray-900 text-sm\">{(selectedPost.profiles?.first_name || \"\").toString() + (selectedPost.profiles?.last_name ? ` ${selectedPost.profiles.last_name}` : \"\") || \"Anonymous\"}</span>\n                        <span className=\"text-gray-400\">Â·</span>\n                        <time dateTime={selectedPost.created_at} className=\"text-gray-500 text-xs\">\n                          {new Date(selectedPost.created_at).toLocaleDateString()}\n                        </time>\n                        {userId === selectedPost.user_id && (\n                          <button\n                            type=\"button\"\n                            onClick={async (e) => {\n                              e.preventDefault();\n                              e.stopPropagation();\n                              await deletePost(selectedPost.id);\n                            }}\n                            disabled={deletingPost === selectedPost.id}\n                            className=\"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n                            title=\"Delete post\"\n                          >\n                            {deletingPost === selectedPost.id ? (\n                              <svg className=\"animate-spin\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                <path d=\"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83\"/>\n                              </svg>\n                            ) : (\n                              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                <path d=\"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2M10 11v6M14 11v6\"/>\n                              </svg>\n                            )}\n                          </button>\n                        )}\n                      </div>\n                      {selectedPost.content ? (\n                        <p className=\"whitespace-pre-wrap break-words text-gray-800 text-sm\">{selectedPost.content}</p>\n                      ) : null}\n                    </div>\n                  </div>\n\n                  {/* Likes and Comments Actions */}\n                  <div className=\"px-4 py-3 border-b border-gray-200\">\n                    <div className=\"flex items-center gap-6\">\n                      <button \n                        type=\"button\"\n                        onClick={(e) => {\n                          e.preventDefault();\n                          e.stopPropagation();\n                          toggleLike(selectedPost);\n                        }} \n                        className={`flex items-center gap-2 transition-colors cursor-pointer hover:scale-105 ${selectedPost.liked_by_me ? \"text-red-500\" : \"text-gray-600 hover:text-red-500\"}`}\n                      >\n                        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill={selectedPost.liked_by_me ? \"currentColor\" : \"none\"} stroke=\"currentColor\" strokeWidth=\"2\">\n                          <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\"/>\n                        </svg>\n                        <span className=\"font-semibold text-sm\">{selectedPost.likes_count ?? 0} {selectedPost.likes_count === 1 ? 'like' : 'likes'}</span>\n                      </button>\n                      <div className=\"flex items-center gap-2 text-gray-600\">\n                        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                          <path d=\"M21 15a2 2 0 01-2 2H8l-4 4V5a2 2 0 012-2h13a2 2 0 012 2v10z\"/>\n                        </svg>\n                        <span className=\"font-semibold text-sm\">{selectedPost.comments_count ?? 0} {selectedPost.comments_count === 1 ? 'comment' : 'comments'}</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Comments Section - Scrollable */}\n                  <div className=\"flex-1 overflow-y-auto p-4 space-y-4 min-h-0\">\n                    {(commentsByPost[selectedPost.id] || []).length === 0 ? (\n                      <div className=\"text-center text-gray-400 py-8\">\n                        <p className=\"text-sm\">No comments yet. Be the first to comment!</p>\n                      </div>\n                    ) : (\n                      (commentsByPost[selectedPost.id] || []).map((c) => (\n                        <div key={c.id} className=\"flex items-start gap-3 group\">\n                          <div className=\"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-xs font-medium flex-shrink-0\">\n                            {(((c.profiles?.first_name || \"\") + (c.profiles?.last_name ? ` ${c.profiles.last_name}` : \"\")) || c.user_id || \"?\").slice(0, 1).toUpperCase()}\n                          </div>\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <span className=\"font-semibold text-gray-900 text-sm\">{(c.profiles?.first_name || \"\") + (c.profiles?.last_name ? ` ${c.profiles.last_name}` : \"\") || \"Anonymous\"}</span>\n                              <span className=\"text-gray-400\">Â·</span>\n                              <time dateTime={c.created_at} className=\"text-gray-500 text-xs\">\n                                {new Date(c.created_at).toLocaleDateString()}\n                              </time>\n                            </div>\n                            <p className=\"whitespace-pre-wrap break-words text-sm text-gray-800\">{c.content}</p>\n                          </div>\n                          {userId === c.user_id && (\n                            <button\n                              type=\"button\"\n                              onClick={async (e) => {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                await deleteComment(c.id, selectedPost.id);\n                              }}\n                              disabled={deletingComment === c.id}\n                              className=\"opacity-0 group-hover:opacity-100 transition-opacity text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-50 flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed\"\n                              title=\"Delete comment\"\n                            >\n                              {deletingComment === c.id ? (\n                                <svg className=\"animate-spin\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                  <path d=\"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83\"/>\n                                </svg>\n                              ) : (\n                                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                  <path d=\"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2M10 11v6M14 11v6\"/>\n                                </svg>\n                              )}\n                            </button>\n                          )}\n                        </div>\n                      ))\n                    )}\n                  </div>\n\n                  {/* Comment Input - Fixed at bottom */}\n                  <div className=\"p-4 border-t border-gray-200 bg-white\">\n                    <div className=\"flex items-center gap-2\">\n                      <input\n                        type=\"text\"\n                        placeholder={userId ? \"Add a commentâ€¦\" : \"Sign in to comment\"}\n                        value={newCommentContent[selectedPost.id] || \"\"}\n                        onChange={(e) => setNewCommentContent((p) => ({ ...p, [selectedPost.id]: e.target.value }))}\n                        className=\"flex-1 h-10 px-3 rounded-md border border-gray-300 focus:ring-2 focus:ring-[#8c52ff] focus:border-transparent outline-none text-sm\"\n                        disabled={!userId}\n                        onKeyDown={(e) => {\n                          if (e.key === \"Enter\" && !e.shiftKey && userId && (newCommentContent[selectedPost.id] || \"\").trim()) {\n                            e.preventDefault();\n                            submitComment(selectedPost.id);\n                          }\n                        }}\n                      />\n                      <button \n                        type=\"button\"\n                        onClick={(e) => {\n                          e.preventDefault();\n                          e.stopPropagation();\n                          submitComment(selectedPost.id);\n                        }} \n                        disabled={!userId || !(newCommentContent[selectedPost.id] || \"\").trim()} \n                        className=\"px-4 h-10 rounded-md bg-[#8c52ff] text-white disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90 text-sm font-medium\"\n                      >\n                        Post\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </Modal>\n      </div>\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AAEA,sDAAsD;AACtD;AACA;AACA;AALA;;;;;AAkCe,SAAS;IACtB,MAAM,WAAW,IAAA,gNAAO,EAAC,IAAM,IAAA,gJAAY,KAAI,EAAE;IACjD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAgB;IACpD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAS,EAAE;IAC7C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAc,IAAI;IACxE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAA4B,CAAC;IACjF,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAyB,CAAC;IACpF,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAc;IACxD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAgB;IAChE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAc;IAC9D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAgB;IAChE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAgB;IAEtE,IAAA,kNAAS,EAAC;QACR,IAAI,UAAU;QACd,CAAC;YACC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;YAC5C,IAAI,CAAC,SAAS;YACd,MAAM,MAAM,KAAK,IAAI,EAAE,MAAM;YAC7B,UAAU;YACV,MAAM,UAAU;YAChB,WAAW;QACb,CAAC;QACD,MAAM,EAAE,MAAM,GAAG,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB,CAAC,OAAO,IAAI;YAC/D,MAAM,MAAM,SAAS,MAAM,MAAM;YACjC,UAAU;YACV,MAAM,UAAU;QAClB;QACA,OAAO;YACL,UAAU;YACV,IAAI,YAAY,CAAC,WAAW;QAC9B;IACA,uDAAuD;IACzD,GAAG,EAAE;IAEL,eAAe,UAAU,gBAA+B,MAAM;QAC5D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,SACL,MAAM,CACL,CAAC;iEACwD,CAAC,EAE3D,KAAK,CAAC,cAAc;YAAE,WAAW;QAAM;QAE1C,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC;YACd;QACF;QAEA,MAAM,aAAa,AAAC,KAAe,GAAG,CAAC,CAAC,MAAQ,CAAC;gBAC/C,GAAG,GAAG;gBACN,aAAa,MAAM,OAAO,CAAC,IAAI,WAAW,IAAI,IAAI,WAAW,CAAC,EAAE,EAAE,SAAS,IAAI,IAAI,WAAW,IAAI;gBAClG,gBAAgB,MAAM,OAAO,CAAC,IAAI,cAAc,IAAI,IAAI,cAAc,CAAC,EAAE,EAAE,SAAS,IAAI,IAAI,cAAc,IAAI;gBAC9G,aAAa;YACf,CAAC;QAED,IAAI,iBAAiB,WAAW,MAAM,EAAE;YACtC,MAAM,UAAU,WAAW,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE;YAC1C,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,QAAQ,EAAE,GAAG,MAAM,SAC9C,IAAI,CAAC,SACL,MAAM,CAAC,WACP,EAAE,CAAC,WAAW,eACd,EAAE,CAAC,WAAW;YACjB,IAAI,CAAC,YAAY,SAAS;gBACxB,MAAM,WAAW,IAAI,IAAI,QAAQ,GAAG,CAAC,CAAC,IAAW,EAAE,OAAO;gBAC1D,KAAK,MAAM,KAAK,WAAY,EAAE,WAAW,GAAG,SAAS,GAAG,CAAC,EAAE,EAAE;YAC/D;QACF;QAEA,SAAS;IACX;IAEA,eAAe,WAAW,CAAkB;QAC1C,EAAE,cAAc;QAChB,IAAI,CAAC,QAAQ;YACX,OAAO,QAAQ,CAAC,IAAI,GAAG;YACvB;QACF;QAEA,gDAAgD;QAChD,IAAI,CAAC,QAAQ,IAAI,MAAM,CAAC,WAAW;YACjC,MAAM;YACN;QACF;QAEA,mCAAmC;QACnC,IAAI,CAAC,WAAW;YACd,MAAM;YACN;QACF;QAEA,cAAc;QACd,IAAI,WAA0B;QAC9B,QAAQ,GAAG,CAAC;QAEZ,IAAI;YACF,+EAA+E;YAC/E,MAAM,EAAE,MAAM,WAAW,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,SACtD,IAAI,CAAC,YACL,MAAM,CAAC,MACP,EAAE,CAAC,MAAM,QACT,WAAW;YAEd,IAAI,gBAAgB,aAAa,IAAI,KAAK,YAAY;gBACpD,QAAQ,KAAK,CAAC,2BAA2B;YAC3C;YAEA,6CAA6C;YAC7C,IAAI,CAAC,aAAa;gBAChB,MAAM,EAAE,OAAO,kBAAkB,EAAE,GAAG,MAAM,SACzC,IAAI,CAAC,YACL,MAAM,CAAC;oBACN,IAAI;oBACJ,YAAY;oBACZ,WAAW;oBACX,YAAY,IAAI,OAAO,WAAW;oBAClC,YAAY,IAAI,OAAO,WAAW;gBACpC,GAAG;oBAAE,YAAY;gBAAK;gBAExB,IAAI,oBAAoB;oBACtB,QAAQ,KAAK,CAAC,2BAA2B;gBACzC,gDAAgD;gBAClD;YACF;YAEA,2BAA2B;YAC3B,IAAI,WAAW;gBACb,IAAI;oBACF,QAAQ,GAAG,CAAC;oBACZ,MAAM,MAAM,UAAU,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,iBAAiB;oBAC9D,MAAM,OAAO,GAAG,OAAO,CAAC,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE,KAAK;oBAEpF,MAAM,EAAE,OAAO,KAAK,EAAE,MAAM,UAAU,EAAE,GAAG,MAAM,SAC9C,OAAO,CACP,IAAI,CAAC,eACL,MAAM,CAAC,MAAM,WAAW;wBACvB,cAAc;wBACd,QAAQ;wBACR,aAAa,UAAU,IAAI,IAAI;oBACjC;oBAEF,IAAI,OAAO;wBACT,QAAQ,KAAK,CAAC,iBAAiB;wBAC/B,MAAM,IAAI,MAAM,CAAC,wBAAwB,EAAE,MAAM,OAAO,EAAE;oBAC5D;oBAEA,MAAM,EAAE,MAAM,GAAG,EAAE,GAAG,SAAS,OAAO,CAAC,IAAI,CAAC,eAAe,YAAY,CAAC;oBACxE,WAAW,IAAI,SAAS;gBAC1B,EAAE,OAAO,WAAgB;oBACvB,QAAQ,KAAK,CAAC,wBAAwB;oBACtC,MAAM,IAAI,MAAM,CAAC,qBAAqB,EAAE,UAAU,OAAO,IAAI,iBAAiB;gBAChF;YACF;YAEA,cAAc;YACd,QAAQ,GAAG,CAAC;YACZ,MAAM,EAAE,OAAO,WAAW,EAAE,MAAM,UAAU,EAAE,GAAG,MAAM,SACpD,IAAI,CAAC,SACL,MAAM,CAAC;gBACN,SAAS,QAAQ,IAAI,MAAM;gBAC3B,WAAW;gBACX,SAAS;YACX,GACC,MAAM,GACN,MAAM;YAET,IAAI,aAAa;gBACf,QAAQ,KAAK,CAAC,iBAAiB;gBAC/B,MAAM,IAAI,MAAM,CAAC,uBAAuB,EAAE,YAAY,OAAO,EAAE;YACjE;YAEA,wCAAwC;YACxC,WAAW;YACX,aAAa;YACb,gBAAgB;YAEhB,eAAe;YACf,QAAQ,GAAG,CAAC;YACZ,MAAM,UAAU;QAElB,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,wBAAwB;YACtC,MAAM,eAAe,KAAK,WAAW,KAAK,OAAO,WAAW;YAC5D,MAAM;QACR,SAAU;YACR,cAAc;QAChB;IACF;IAEA,eAAe,WAAW,IAAU;QAClC,IAAI,CAAC,QAAQ;YACX,OAAO,QAAQ,CAAC,IAAI,GAAG;YACvB;QACF;QAEA,MAAM,WAAW,KAAK,WAAW;QAEjC,0BAA0B;QAC1B,IAAI,gBAAgB,aAAa,EAAE,KAAK,KAAK,EAAE,EAAE;YAC/C,gBAAgB;gBACd,GAAG,YAAY;gBACf,aAAa,CAAC;gBACd,aAAa,KAAK,GAAG,CAAC,GAAG,CAAC,aAAa,WAAW,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;YAC/E;QACF;QAEA,IAAI;YACF,IAAI,UAAU;gBACZ,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,SAAS,MAAM,GAAG,KAAK,CAAC;oBAAE,SAAS,KAAK,EAAE;oBAAE,SAAS;gBAAO;gBAClG,IAAI,OAAO;oBACT,QAAQ,KAAK,CAAC,wBAAwB;oBACtC,MAAM,MAAM,OAAO;oBACnB,oCAAoC;oBACpC,IAAI,gBAAgB,aAAa,EAAE,KAAK,KAAK,EAAE,EAAE;wBAC/C,gBAAgB;4BACd,GAAG,YAAY;4BACf,aAAa;4BACb,aAAc,aAAa,WAAW,IAAI;wBAC5C;oBACF;oBACA;gBACF;YACF,OAAO;gBACL,6DAA6D;gBAC7D,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,SAClC,IAAI,CAAC,SACL,MAAM,CAAC,MACP,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,EAAE,CAAC,WAAW,QACd,WAAW;gBAEd,IAAI,CAAC,cAAc;oBACjB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACrB,IAAI,CAAC,SACL,MAAM,CAAC;wBAAE,SAAS,KAAK,EAAE;wBAAE,SAAS;oBAAO;oBAC9C,IAAI,OAAO;wBACT,QAAQ,KAAK,CAAC,sBAAsB;wBACpC,MAAM,MAAM,OAAO;wBACnB,oCAAoC;wBACpC,IAAI,gBAAgB,aAAa,EAAE,KAAK,KAAK,EAAE,EAAE;4BAC/C,gBAAgB;gCACd,GAAG,YAAY;gCACf,aAAa;gCACb,aAAc,aAAa,WAAW,IAAI;4BAC5C;wBACF;wBACA;oBACF;gBACF;YACF;YAEA,sCAAsC;YACtC,MAAM,UAAU;YAEhB,sCAAsC;YACtC,MAAM,eAAe,MAAM,SACxB,IAAI,CAAC,SACL,MAAM,CACL,CAAC;mEACwD,CAAC,EAE3D,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,MAAM;YAET,IAAI,aAAa,IAAI,IAAI,gBAAgB,aAAa,EAAE,KAAK,KAAK,EAAE,EAAE;gBACpE,MAAM,aAAa;oBACjB,GAAG,aAAa,IAAI;oBACpB,aAAa,MAAM,OAAO,CAAC,aAAa,IAAI,CAAC,WAAW,IAAI,aAAa,IAAI,CAAC,WAAW,CAAC,EAAE,EAAE,SAAS,IAAI,aAAa,IAAI,CAAC,WAAW,IAAI;oBAC5I,gBAAgB,MAAM,OAAO,CAAC,aAAa,IAAI,CAAC,cAAc,IAAI,aAAa,IAAI,CAAC,cAAc,CAAC,EAAE,EAAE,SAAS,IAAI,aAAa,IAAI,CAAC,cAAc,IAAI;oBACxJ,aAAa;gBACf;gBAEA,gCAAgC;gBAChC,MAAM,EAAE,MAAM,MAAM,EAAE,GAAG,MAAM,SAC5B,IAAI,CAAC,SACL,MAAM,CAAC,WACP,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,EAAE,CAAC,WAAW,QACd,WAAW;gBAEd,WAAW,WAAW,GAAG,CAAC,CAAC;gBAC3B,gBAAgB;YAClB;QACF,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,wBAAwB;YACtC,MAAM,OAAO,WAAW;QAC1B;IACF;IAEA,eAAe,aAAa,MAAc;QACxC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,YACL,MAAM,CAAC,iHACP,EAAE,CAAC,WAAW,QACd,KAAK,CAAC,cAAc;YAAE,WAAW;QAAK;QACzC,IAAI,OAAO,OAAO,MAAM,MAAM,OAAO;QACrC,kBAAkB,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,CAAC,OAAO,EAAE,AAAC,QAAsB,EAAE;YAAC,CAAC;IAC/E;IAEA,eAAe,WAAW,MAAc;QACtC,IAAI,CAAC,QAAQ;YACX,MAAM;YACN;QACF;QAEA,IAAI,iBAAiB,QAAQ;YAC3B,QAAQ,mBAAmB;QAC7B;QAEA,QAAQ,GAAG,CAAC,8BAA8B,QAAQ,YAAY;QAE9D,IAAI,CAAC,QAAQ,6EAA6E;YACxF;QACF;QAEA,gBAAgB;QAEhB,IAAI;YACF,sDAAsD;YACtD,MAAM,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,SAAS,MAAM,GAAG,EAAE,CAAC,WAAW;YAClF,IAAI,YAAY;gBACd,QAAQ,IAAI,CAAC,6CAA6C;YAC5D;YAEA,MAAM,EAAE,OAAO,aAAa,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,GAAG,EAAE,CAAC,WAAW;YACxF,IAAI,eAAe;gBACjB,QAAQ,IAAI,CAAC,gDAAgD;YAC/D;YAEA,kDAAkD;YAClD,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,SACjD,IAAI,CAAC,SACL,MAAM,CAAC,sBACP,EAAE,CAAC,MAAM,QACT,MAAM;YAET,IAAI,YAAY;gBACd,QAAQ,KAAK,CAAC,6BAA6B;gBAC3C,MAAM,IAAI,MAAM,CAAC,sBAAsB,EAAE,WAAW,OAAO,EAAE;YAC/D;YAEA,mBAAmB;YACnB,IAAI,SAAS,OAAO,KAAK,QAAQ;gBAC/B,MAAM;gBACN;YACF;YAEA,IAAI,UAAU,WAAW;gBACvB,wBAAwB;gBACxB,MAAM,WAAW,SAAS,SAAS,CAAC,KAAK,CAAC;gBAC1C,IAAI,SAAS,MAAM,GAAG,GAAG;oBACvB,MAAM,WAAW,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;oBAC1C,MAAM,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,SAAS,OAAO,CAAC,IAAI,CAAC,eAAe,MAAM,CAAC;wBAAC;qBAAS;oBAC5F,IAAI,cAAc;wBAChB,QAAQ,IAAI,CAAC,0DAA0D;oBACzE;gBACF;YACF;YAEA,kBAAkB;YAClB,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,SACL,MAAM,GACN,EAAE,CAAC,MAAM,QACT,EAAE,CAAC,WAAW,QACd,MAAM;YAET,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,wBAAwB;gBACtC,MAAM,IAAI,MAAM,CAAC,uBAAuB,EAAE,MAAM,OAAO,EAAE;YAC3D;YAEA,IAAI,CAAC,QAAQ,KAAK,MAAM,KAAK,GAAG;gBAC9B,MAAM,IAAI,MAAM;YAClB;YAEA,QAAQ,GAAG,CAAC;YAEZ,2CAA2C;YAC3C,IAAI,gBAAgB,aAAa,EAAE,KAAK,QAAQ;gBAC9C;YACF;YAEA,eAAe;YACf,MAAM,UAAU;QAClB,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,wBAAwB;YACtC,MAAM,OAAO,WAAW;QAC1B,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,eAAe,cAAc,SAAiB,EAAE,MAAc;QAC5D,IAAI,CAAC,QAAQ;YACX,MAAM;YACN;QACF;QAEA,IAAI,oBAAoB,WAAW;YACjC,QAAQ,mBAAmB;QAC7B;QAEA,QAAQ,GAAG,CAAC,iCAAiC,WAAW,YAAY;QAEpE,IAAI,CAAC,QAAQ,kDAAkD;YAC7D;QACF;QAEA,mBAAmB;QAEnB,IAAI;YACF,yBAAyB;YACzB,MAAM,EAAE,MAAM,WAAW,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,SACpD,IAAI,CAAC,YACL,MAAM,CAAC,eACP,EAAE,CAAC,MAAM,WACT,MAAM;YAET,IAAI,YAAY;gBACd,QAAQ,KAAK,CAAC,2BAA2B;gBACzC,MAAM,IAAI,MAAM,CAAC,yBAAyB,EAAE,WAAW,OAAO,EAAE;YAClE;YAEA,IAAI,CAAC,aAAa;gBAChB,MAAM,IAAI,MAAM;YAClB;YAEA,mBAAmB;YACnB,IAAI,YAAY,OAAO,KAAK,QAAQ;gBAClC,MAAM;gBACN;YACF;YAEA,qBAAqB;YACrB,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,YACL,MAAM,GACN,EAAE,CAAC,MAAM,WACT,EAAE,CAAC,WAAW,QACd,MAAM;YAET,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,2BAA2B;gBACzC,MAAM,IAAI,MAAM,CAAC,0BAA0B,EAAE,MAAM,OAAO,EAAE;YAC9D;YAEA,IAAI,CAAC,QAAQ,KAAK,MAAM,KAAK,GAAG;gBAC9B,MAAM,IAAI,MAAM;YAClB;YAEA,QAAQ,GAAG,CAAC;YAEZ,wCAAwC;YACxC,MAAM,aAAa;YACnB,MAAM,UAAU;YAEhB,4CAA4C;YAC5C,IAAI,gBAAgB,aAAa,EAAE,KAAK,QAAQ;gBAC9C,MAAM,cAAc,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;gBAC7C,IAAI,aAAa;oBACf,gBAAgB;wBACd,GAAG,WAAW;wBACd,gBAAgB,KAAK,GAAG,CAAC,GAAG,CAAC,YAAY,cAAc,IAAI,CAAC,IAAI;oBAClE;gBACF;YACF;QACF,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,2BAA2B;YACzC,MAAM,OAAO,WAAW;QAC1B,SAAU;YACR,mBAAmB;QACrB;IACF;IAEA,eAAe,cAAc,MAAc;QACzC,IAAI,CAAC,QAAQ;YACX,OAAO,QAAQ,CAAC,IAAI,GAAG;YACvB;QACF;QAEA,MAAM,OAAO,CAAC,iBAAiB,CAAC,OAAO,IAAI,EAAE,EAAE,IAAI;QACnD,IAAI,CAAC,MAAM;YACT,MAAM;YACN;QACF;QAEA,oBAAoB;QACpB,MAAM,gBAAgB,cAAc,kBAAkB;QACtD,IAAI,gBAAgB,aAAa,EAAE,KAAK,QAAQ;YAC9C,gBAAgB;gBACd,GAAG,YAAY;gBACf,gBAAgB,gBAAgB;YAClC;QACF;QAEA,0BAA0B;QAC1B,qBAAqB,CAAC,IAAM,CAAC;gBAAE,GAAG,CAAC;gBAAE,CAAC,OAAO,EAAE;YAAG,CAAC;QAEnD,IAAI;YACF,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,YACL,MAAM,CAAC;gBAAE,SAAS;gBAAQ,SAAS;gBAAM,SAAS;YAAO,GACzD,MAAM,GACN,MAAM;YAET,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,6BAA6B;gBAC3C,MAAM,MAAM,OAAO;gBACnB,oCAAoC;gBACpC,IAAI,gBAAgB,aAAa,EAAE,KAAK,QAAQ;oBAC9C,gBAAgB;wBACd,GAAG,YAAY;wBACf,gBAAgB;oBAClB;gBACF;gBACA,qBAAqB;gBACrB,qBAAqB,CAAC,IAAM,CAAC;wBAAE,GAAG,CAAC;wBAAE,CAAC,OAAO,EAAE;oBAAK,CAAC;gBACrD;YACF;YAEA,sCAAsC;YACtC,MAAM,aAAa;YAEnB,6CAA6C;YAC7C,MAAM,UAAU;YAEhB,sCAAsC;YACtC,MAAM,eAAe,MAAM,SACxB,IAAI,CAAC,SACL,MAAM,CACL,CAAC;mEACwD,CAAC,EAE3D,EAAE,CAAC,MAAM,QACT,MAAM;YAET,IAAI,aAAa,IAAI,IAAI,gBAAgB,aAAa,EAAE,KAAK,QAAQ;gBACnE,MAAM,aAAa;oBACjB,GAAG,aAAa,IAAI;oBACpB,aAAa,MAAM,OAAO,CAAC,aAAa,IAAI,CAAC,WAAW,IAAI,aAAa,IAAI,CAAC,WAAW,CAAC,EAAE,EAAE,SAAS,IAAI,aAAa,IAAI,CAAC,WAAW,IAAI;oBAC5I,gBAAgB,MAAM,OAAO,CAAC,aAAa,IAAI,CAAC,cAAc,IAAI,aAAa,IAAI,CAAC,cAAc,CAAC,EAAE,EAAE,SAAS,IAAI,aAAa,IAAI,CAAC,cAAc,IAAI;oBACxJ,aAAa,aAAa,WAAW;gBACvC;gBAEA,gBAAgB;YAClB;QACF,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,2BAA2B;YACzC,MAAM,OAAO,WAAW;YACxB,oCAAoC;YACpC,IAAI,gBAAgB,aAAa,EAAE,KAAK,QAAQ;gBAC9C,gBAAgB;oBACd,GAAG,YAAY;oBACf,gBAAgB;gBAClB;YACF;YACA,qBAAqB;YACrB,qBAAqB,CAAC,IAAM,CAAC;oBAAE,GAAG,CAAC;oBAAE,CAAC,OAAO,EAAE;gBAAK,CAAC;QACvD;IACF;IAEA,SAAS,eAAe,MAAc;QACpC,mBAAmB,CAAC;YAClB,MAAM,OAAO,IAAI,IAAI;YACrB,IAAI,KAAK,GAAG,CAAC,SAAS,KAAK,MAAM,CAAC;iBAC7B,KAAK,GAAG,CAAC;YACd,OAAO;QACT;QACA,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,KAAK,aAAa;IACjD;IAEA,SAAS,cAAc,IAAU;QAC/B,gBAAgB;QAChB,eAAe;QACf,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC,EAAE;YAC5B,KAAK,aAAa,KAAK,EAAE;QAC3B;IACF;IAEA,SAAS;QACP,eAAe;QACf,gBAAgB;IAClB;IAEA,8CAA8C;IAC9C,MAAM,kBAAkB,IAAA,gNAAO,EAAC;QAC9B,OAAO,MAAM,MAAM,CAAC,CAAA,OAAQ,KAAK,SAAS;IAC5C,GAAG;QAAC;KAAM;IAEV,+EAA+E;IAC/E,IAAA,kNAAS,EAAC;QACR,IAAI,gBAAgB,eAAe,MAAM,MAAM,GAAG,GAAG;YACnD,MAAM,cAAc,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,aAAa,EAAE;YAC5D,IAAI,aAAa;gBACf,sFAAsF;gBACtF,IAAI,YAAY,WAAW,KAAK,aAAa,WAAW,IACpD,YAAY,cAAc,KAAK,aAAa,cAAc,IAC1D,YAAY,WAAW,KAAK,aAAa,WAAW,EAAE;oBACxD,gBAAgB;gBAClB;YACF;QACF;IACA,uDAAuD;IACzD,GAAG;QAAC;QAAO;KAAY;IAEvB,mCAAmC;IACnC,IAAA,kNAAS,EAAC;QACR,MAAM,cAAc,OAAO;YACzB,IAAI,CAAC,UAAU,YAAY;YAE3B,MAAM,QAAQ,EAAE,aAAa,EAAE;YAC/B,IAAI,CAAC,OAAO;YAEZ,8BAA8B;YAC9B,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,MAAM,EAAE,IAAK;gBACrC,MAAM,OAAO,KAAK,CAAC,EAAE;gBAErB,gCAAgC;gBAChC,IAAI,KAAK,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,GAAG;oBACrC,EAAE,cAAc;oBAEhB,MAAM,OAAO,KAAK,SAAS;oBAC3B,IAAI,MAAM;wBACR,qBAAqB;wBACrB,IAAI,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,WAAW;4BACnC,MAAM;4BACN;wBACF;wBAEA,gCAAgC;wBAChC,IAAI,KAAK,IAAI,GAAG,KAAK,OAAO,MAAM;4BAChC,MAAM;4BACN;wBACF;wBAEA,iCAAiC;wBACjC,aAAa;wBACb,gBAAgB,IAAI,eAAe,CAAC;oBACtC;oBACA;gBACF;YACF;QACF;QAEA,2CAA2C;QAC3C,SAAS,gBAAgB,CAAC,SAAS;QAEnC,OAAO;YACL,SAAS,mBAAmB,CAAC,SAAS;QACxC;IACF,GAAG;QAAC;QAAQ;KAAW;IAEvB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAA0B;;;;;;8BAGxC,8OAAC;oBAAK,UAAU;oBAAY,WAAU;;sCACpC,8OAAC;4BACC,OAAO;4BACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;4BAC1C,aAAa,SAAS,yEAAyE;4BAC/F,WAAU;4BACV,UAAU,CAAC,UAAU;4BACrB,SAAS,CAAC;gCACR,6CAA6C;gCAC7C,uDAAuD;gCACvD,MAAM,QAAQ,EAAE,aAAa,EAAE;gCAC/B,IAAI,OAAO;oCACT,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,MAAM,EAAE,IAAK;wCACrC,IAAI,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,GAAG;4CACzC,EAAE,cAAc;4CAChB;wCACF;oCACF;gCACF;4BACF;;;;;;wBAED,8BACC,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,KAAK;gCAAc,KAAI;gCAAW,WAAU;;;;;;;;;;;sCAGrD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAM,WAAU;;sDACf,8OAAC;4CACC,MAAK;4CACL,QAAO;4CACP,WAAU;4CACV,UAAU,CAAC,UAAU;4CACrB,UAAU,CAAC;gDACT,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI;gDACpC,aAAa;gDACb,gBAAgB,OAAO,IAAI,eAAe,CAAC,QAAQ;4CACrD;;;;;;sDAEF,8OAAC;4CAAK,WAAU;sDAAuF;;;;;;wCACtG,2BAAa,8OAAC;4CAAK,WAAU;sDAAyB,UAAU,IAAI;;;;;;;;;;;;8CAEvE,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAK,WAAU;;gDAAyB,QAAQ,MAAM;gDAAC;;;;;;;sDACxD,8OAAC;4CACC,MAAK;4CACL,UAAU,CAAC,UAAU,cAAc,QAAQ,MAAM,GAAG,OAAO,CAAC;4CAC5D,WAAU;sDAET,aAAa,eAAe;;;;;;;;;;;;;;;;;;;;;;;;gBAOpC,wBACC,8OAAC;oBAAI,WAAU;8BAAkC;;;;;2BAC/C,gBAAgB,MAAM,KAAK,kBAC7B,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAE,WAAU;sCAAe;;;;;;sCAC5B,8OAAC;4BAAE,WAAU;sCAAU;;;;;;;;;;;yCAGzB,8OAAC;oBACC,WAAU;oBACV,OAAO;wBAAE,YAAY;oBAAU;8BAE9B,gBAAgB,GAAG,CAAC,CAAC,qBACpB,8OAAC;4BAEC,WAAU;4BACV,SAAS,IAAM,cAAc;sCAE5B,KAAK,SAAS,kBACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,KAAK,KAAK,SAAS;wCACnB,KAAK,KAAK,OAAO,IAAI;wCACrB,WAAU;wCACV,SAAQ;;;;;;kDAGV,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAI,OAAM;4DAAK,QAAO;4DAAK,SAAQ;4DAAY,MAAM,KAAK,WAAW,GAAG,iBAAiB;4DAAQ,QAAO;4DAAe,aAAY;sEAClI,cAAA,8OAAC;gEAAK,GAAE;;;;;;;;;;;sEAEV,8OAAC;sEAAM,KAAK,WAAW,IAAI;;;;;;;;;;;;8DAE7B,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAI,OAAM;4DAAK,QAAO;4DAAK,SAAQ;4DAAY,MAAK;4DAAO,QAAO;4DAAe,aAAY;sEAC5F,cAAA,8OAAC;gEAAK,GAAE;;;;;;;;;;;sEAEV,8OAAC;sEAAM,KAAK,cAAc,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2BAzBnC,KAAK,EAAE;;;;;;;;;;8BAqCpB,8OAAC,8HAAK;oBAAC,MAAM;oBAAa,SAAS;oBAAY,OAAM;oBAAG,WAAU;oBAAgB,iBAAiB;8BAChG,8BACC,8OAAC;wBAAI,WAAU;;0CAEb,8OAAC;gCACC,SAAS;gCACT,WAAU;gCACV,cAAW;0CAEX,cAAA,8OAAC;oCAAI,OAAM;oCAAK,QAAO;oCAAK,SAAQ;oCAAY,MAAK;oCAAO,QAAO;oCAAe,aAAY;8CAC5F,cAAA,8OAAC;wCAAK,GAAE;;;;;;;;;;;;;;;;0CAIZ,8OAAC;gCAAI,WAAU;;kDAEb,8OAAC;wCAAI,WAAU;kDACZ,aAAa,SAAS,kBACrB,8OAAC;4CACC,KAAK,aAAa,SAAS;4CAC3B,KAAI;4CACJ,WAAU;;;;;;;;;;;kDAMhB,8OAAC;wCAAI,WAAU;;0DAEb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;kEACZ,CAAC,AAAC,CAAC,aAAa,QAAQ,EAAE,cAAc,EAAE,IAAI,CAAC,aAAa,QAAQ,EAAE,YAAY,CAAC,CAAC,EAAE,aAAa,QAAQ,CAAC,SAAS,EAAE,GAAG,EAAE,KAAM,aAAa,OAAO,IAAI,GAAG,EAAE,KAAK,CAAC,GAAG,GAAG,WAAW;;;;;;kEAEzL,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEAAI,WAAU;;kFACb,8OAAC;wEAAK,WAAU;kFAAuC,CAAC,aAAa,QAAQ,EAAE,cAAc,EAAE,EAAE,QAAQ,KAAK,CAAC,aAAa,QAAQ,EAAE,YAAY,CAAC,CAAC,EAAE,aAAa,QAAQ,CAAC,SAAS,EAAE,GAAG,EAAE,KAAK;;;;;;kFACjM,8OAAC;wEAAK,WAAU;kFAAgB;;;;;;kFAChC,8OAAC;wEAAK,UAAU,aAAa,UAAU;wEAAE,WAAU;kFAChD,IAAI,KAAK,aAAa,UAAU,EAAE,kBAAkB;;;;;;oEAEtD,WAAW,aAAa,OAAO,kBAC9B,8OAAC;wEACC,MAAK;wEACL,SAAS,OAAO;4EACd,EAAE,cAAc;4EAChB,EAAE,eAAe;4EACjB,MAAM,WAAW,aAAa,EAAE;wEAClC;wEACA,UAAU,iBAAiB,aAAa,EAAE;wEAC1C,WAAU;wEACV,OAAM;kFAEL,iBAAiB,aAAa,EAAE,iBAC/B,8OAAC;4EAAI,WAAU;4EAAe,OAAM;4EAAK,QAAO;4EAAK,SAAQ;4EAAY,MAAK;4EAAO,QAAO;4EAAe,aAAY;sFACrH,cAAA,8OAAC;gFAAK,GAAE;;;;;;;;;;iGAGV,8OAAC;4EAAI,OAAM;4EAAK,QAAO;4EAAK,SAAQ;4EAAY,MAAK;4EAAO,QAAO;4EAAe,aAAY;sFAC5F,cAAA,8OAAC;gFAAK,GAAE;;;;;;;;;;;;;;;;;;;;;;4DAMjB,aAAa,OAAO,iBACnB,8OAAC;gEAAE,WAAU;0EAAyD,aAAa,OAAO;;;;;uEACxF;;;;;;;;;;;;;0DAKR,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DACC,MAAK;4DACL,SAAS,CAAC;gEACR,EAAE,cAAc;gEAChB,EAAE,eAAe;gEACjB,WAAW;4DACb;4DACA,WAAW,CAAC,yEAAyE,EAAE,aAAa,WAAW,GAAG,iBAAiB,oCAAoC;;8EAEvK,8OAAC;oEAAI,OAAM;oEAAK,QAAO;oEAAK,SAAQ;oEAAY,MAAM,aAAa,WAAW,GAAG,iBAAiB;oEAAQ,QAAO;oEAAe,aAAY;8EAC1I,cAAA,8OAAC;wEAAK,GAAE;;;;;;;;;;;8EAEV,8OAAC;oEAAK,WAAU;;wEAAyB,aAAa,WAAW,IAAI;wEAAE;wEAAE,aAAa,WAAW,KAAK,IAAI,SAAS;;;;;;;;;;;;;sEAErH,8OAAC;4DAAI,WAAU;;8EACb,8OAAC;oEAAI,OAAM;oEAAK,QAAO;oEAAK,SAAQ;oEAAY,MAAK;oEAAO,QAAO;oEAAe,aAAY;8EAC5F,cAAA,8OAAC;wEAAK,GAAE;;;;;;;;;;;8EAEV,8OAAC;oEAAK,WAAU;;wEAAyB,aAAa,cAAc,IAAI;wEAAE;wEAAE,aAAa,cAAc,KAAK,IAAI,YAAY;;;;;;;;;;;;;;;;;;;;;;;;0DAMlI,8OAAC;gDAAI,WAAU;0DACZ,CAAC,cAAc,CAAC,aAAa,EAAE,CAAC,IAAI,EAAE,EAAE,MAAM,KAAK,kBAClD,8OAAC;oDAAI,WAAU;8DACb,cAAA,8OAAC;wDAAE,WAAU;kEAAU;;;;;;;;;;2DAGzB,CAAC,cAAc,CAAC,aAAa,EAAE,CAAC,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,kBAC3C,8OAAC;wDAAe,WAAU;;0EACxB,8OAAC;gEAAI,WAAU;0EACZ,CAAC,AAAC,CAAC,EAAE,QAAQ,EAAE,cAAc,EAAE,IAAI,CAAC,EAAE,QAAQ,EAAE,YAAY,CAAC,CAAC,EAAE,EAAE,QAAQ,CAAC,SAAS,EAAE,GAAG,EAAE,KAAM,EAAE,OAAO,IAAI,GAAG,EAAE,KAAK,CAAC,GAAG,GAAG,WAAW;;;;;;0EAE7I,8OAAC;gEAAI,WAAU;;kFACb,8OAAC;wEAAI,WAAU;;0FACb,8OAAC;gFAAK,WAAU;0FAAuC,CAAC,EAAE,QAAQ,EAAE,cAAc,EAAE,IAAI,CAAC,EAAE,QAAQ,EAAE,YAAY,CAAC,CAAC,EAAE,EAAE,QAAQ,CAAC,SAAS,EAAE,GAAG,EAAE,KAAK;;;;;;0FACrJ,8OAAC;gFAAK,WAAU;0FAAgB;;;;;;0FAChC,8OAAC;gFAAK,UAAU,EAAE,UAAU;gFAAE,WAAU;0FACrC,IAAI,KAAK,EAAE,UAAU,EAAE,kBAAkB;;;;;;;;;;;;kFAG9C,8OAAC;wEAAE,WAAU;kFAAyD,EAAE,OAAO;;;;;;;;;;;;4DAEhF,WAAW,EAAE,OAAO,kBACnB,8OAAC;gEACC,MAAK;gEACL,SAAS,OAAO;oEACd,EAAE,cAAc;oEAChB,EAAE,eAAe;oEACjB,MAAM,cAAc,EAAE,EAAE,EAAE,aAAa,EAAE;gEAC3C;gEACA,UAAU,oBAAoB,EAAE,EAAE;gEAClC,WAAU;gEACV,OAAM;0EAEL,oBAAoB,EAAE,EAAE,iBACvB,8OAAC;oEAAI,WAAU;oEAAe,OAAM;oEAAK,QAAO;oEAAK,SAAQ;oEAAY,MAAK;oEAAO,QAAO;oEAAe,aAAY;8EACrH,cAAA,8OAAC;wEAAK,GAAE;;;;;;;;;;yFAGV,8OAAC;oEAAI,OAAM;oEAAK,QAAO;oEAAK,SAAQ;oEAAY,MAAK;oEAAO,QAAO;oEAAe,aAAY;8EAC5F,cAAA,8OAAC;wEAAK,GAAE;;;;;;;;;;;;;;;;;uDAhCR,EAAE,EAAE;;;;;;;;;;0DA2CpB,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DACC,MAAK;4DACL,aAAa,SAAS,mBAAmB;4DACzC,OAAO,iBAAiB,CAAC,aAAa,EAAE,CAAC,IAAI;4DAC7C,UAAU,CAAC,IAAM,qBAAqB,CAAC,IAAM,CAAC;wEAAE,GAAG,CAAC;wEAAE,CAAC,aAAa,EAAE,CAAC,EAAE,EAAE,MAAM,CAAC,KAAK;oEAAC,CAAC;4DACzF,WAAU;4DACV,UAAU,CAAC;4DACX,WAAW,CAAC;gEACV,IAAI,EAAE,GAAG,KAAK,WAAW,CAAC,EAAE,QAAQ,IAAI,UAAU,CAAC,iBAAiB,CAAC,aAAa,EAAE,CAAC,IAAI,EAAE,EAAE,IAAI,IAAI;oEACnG,EAAE,cAAc;oEAChB,cAAc,aAAa,EAAE;gEAC/B;4DACF;;;;;;sEAEF,8OAAC;4DACC,MAAK;4DACL,SAAS,CAAC;gEACR,EAAE,cAAc;gEAChB,EAAE,eAAe;gEACjB,cAAc,aAAa,EAAE;4DAC/B;4DACA,UAAU,CAAC,UAAU,CAAC,CAAC,iBAAiB,CAAC,aAAa,EAAE,CAAC,IAAI,EAAE,EAAE,IAAI;4DACrE,WAAU;sEACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAavB","debugId":null}}]
}